<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Discover how to incorporate custom-made modules to add unique or specialized features to your network that go beyond the capabilities of the built-in modules."><link href=https://docs.tanssi.network/builders/build/customize/adding-custom-made-module/ rel=canonical><link href=../adding-built-in-module/ rel=prev><link href=../adding-external-module/ rel=next><link rel=icon href=/assets/images/tanssi-favicon.webp><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>Adding a Custom-Made Module | Tanssi Docs</title><link rel=stylesheet href=../../../../assets/stylesheets/main.50c56a3b.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Epilogue:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=/assets/stylesheets/tanssi.min.css><link rel=stylesheet href=/assets/stylesheets/termynal.min.css><link rel=stylesheet href=/assets/stylesheets/timeline-neoteroi.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-BT4KVVBH8F"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-BT4KVVBH8F",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-BT4KVVBH8F",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#adding-custom-made-module class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=logo-container> <a href=https://docs.tanssi.network/ title="Tanssi Docs" class="md-header__button md-logo" aria-label="Tanssi Docs" data-md-component=logo> <img src=/assets/images/tanssi-logo-white.webp alt=logo> </a> </div> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../ >Builders</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/build.webp alt="Build Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Build Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../deploy/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/deploy.webp alt="Deploy Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Deploy Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../manage/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/manage.webp alt="Manage Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Manage Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../toolkit/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/toolkit.webp alt="Network Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Toolkit</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../account-management/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/account-management.webp alt="Account Management" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Account Management</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../tanssi-network/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi-network.webp alt="Network Essentials" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Essentials</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../node-operators/ >Node Operators</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../node-operators/network-node/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/network-node.webp alt="Run a Network Node" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Run a Network Node</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../node-operators/sequencers/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/sequencers.webp alt=Sequencers loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Sequencers</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../node-operators/operators/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/operators.webp alt=Operators loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Operators</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../learn/ >Learn</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../learn/tanssi/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi.webp alt="Introduction to Tanssi" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Introduction to Tanssi</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../learn/framework/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/framework.webp alt="Network Development Framework" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Development Framework</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../learn/decentralized-networks/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/decentralized-networks.webp alt="Tanssi-Powered Networks" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Tanssi-Powered Networks</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=https://www.tanssi.network/ >About</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=https://www.tanssi.network/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/about-tanssi.webp alt="About Tanssi" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>About Tanssi</span> </div> </a> </li> <li class=md-tab__item> <a href=https://apps.tanssi.network/dancebox> <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi-testnet.webp alt="Tanssi TestNet" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Tanssi TestNet</span> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class=md-header__buttons> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Tanssi Docs" class="md-nav__button md-logo" aria-label="Tanssi Docs" data-md-component=logo> <img src=/assets/images/tanssi-logo-white.webp alt=logo> </a> Tanssi Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../ >Builders</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Builders </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Build Your Network</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Build Your Network </label> <ul class="md-nav__list builders-build-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../templates/ >Network Templates</a> <label for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Network Templates </label> <ul class="md-nav__list builders-build-templates-" data-md-scrollfix> <li class=md-nav__item> <a href=../../templates/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../templates/substrate/ class=md-nav__link> Substrate </a> </li> <li class=md-nav__item> <a href=../../templates/evm/ class=md-nav__link> EVM </a> </li> <li class=md-nav__item> <a href=../../templates/custom-runtime/ class=md-nav__link> Custom Runtime </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Customize Your Network</a> <label for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Customize Your Network </label> <ul class="md-nav__list builders-build-customize-" data-md-scrollfix> <li class=md-nav__item> <a href=../prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../adding-built-in-module/ class=md-nav__link> Adding a Built-in Module </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Adding a Custom-Made Module <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Adding a Custom-Made Module </a> <nav class="md-nav md-nav--secondary" aria-label=Sections> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#creating-lottery-module-files class=md-nav__link> <span class=md-ellipsis> Creating the Lottery Module Files </span> </a> </li> <li class=md-nav__item> <a href=#configure-module-dependencies class=md-nav__link> <span class=md-ellipsis> Configure the Module's Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#adding-custom-logic class=md-nav__link> <span class=md-ellipsis> Adding Custom Logic </span> </a> <nav class=md-nav aria-label="Adding Custom Logic"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implementing-basic-structure class=md-nav__link> <span class=md-ellipsis> Implementing the Module Basic Structure </span> </a> </li> <li class=md-nav__item> <a href=#implementing-module-configuration class=md-nav__link> <span class=md-ellipsis> Implementing the Module Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementing-transactions class=md-nav__link> <span class=md-ellipsis> Implementing Transactions </span> </a> </li> <li class=md-nav__item> <a href=#implementing-custom-errors class=md-nav__link> <span class=md-ellipsis> Implementing Custom Errors </span> </a> </li> <li class=md-nav__item> <a href=#implementing-events class=md-nav__link> <span class=md-ellipsis> Implementing Events </span> </a> </li> <li class=md-nav__item> <a href=#implementing-storage class=md-nav__link> <span class=md-ellipsis> Implementing Storage for State Persistence </span> </a> </li> <li class=md-nav__item> <a href=#complete-module class=md-nav__link> <span class=md-ellipsis> The Complete Module </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configure-runtime class=md-nav__link> <span class=md-ellipsis> Configure the Runtime </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../adding-external-module/ class=md-nav__link> Adding an External Module </a> </li> <li class=md-nav__item> <a href=../customizing-chain-specs/ class=md-nav__link> Chain Specifications </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../deploy/ >Deploy Your Network</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Deploy Your Network </label> <ul class="md-nav__list builders-deploy-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../deploy/dapp/ class=md-nav__link> Using the Tanssi DApp </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../manage/ >Manage Your Network</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Manage Your Network </label> <ul class="md-nav__list builders-manage-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../manage/dapp/ >Using the Tanssi dApp</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> Using the Tanssi dApp </label> <ul class="md-nav__list builders-manage-dapp-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../manage/dapp/services-payment/ class=md-nav__link> Block Production Services Payment </a> </li> <li class=md-nav__item> <a href=../../../manage/dapp/manage-tokens/ class=md-nav__link> Manage Tokens </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../manage/developer-portal/ >Using the Developer Portal</a> <label for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> Using the Developer Portal </label> <ul class="md-nav__list builders-manage-developer-portal-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../manage/developer-portal/sudo/ class=md-nav__link> Manage the Sudo Account </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/upgrade/ class=md-nav__link> Dispatch Runtime Upgrades </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/maintenance/ class=md-nav__link> Enable Maintenance Mode </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/pause-transactions/ class=md-nav__link> Pause Transactions </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/impersonate/ class=md-nav__link> Impersonate Accounts </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/minting/ class=md-nav__link> Mint Tokens </a> </li> <li class=md-nav__item> <a href=../../../manage/developer-portal/smart-contracts-creation-filter/ class=md-nav__link> Smart EVM - Whitelist Contract Deployments </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ >Network Toolkit</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Network Toolkit </label> <ul class="md-nav__list builders-toolkit-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ethereum-api/ >Ethereum Tools</a> <label for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> Ethereum Tools </label> <ul class="md-nav__list builders-toolkit-ethereum-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ethereum-api/wallets/ >Wallets</a> <label for=__nav_2_5_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_2> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-ethereum-api-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/wallets/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/wallets/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/wallets/subwallet/ class=md-nav__link> SubWallet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ethereum-api/dev-env/ >Dev Environments</a> <label for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> Dev Environments </label> <ul class="md-nav__list builders-toolkit-ethereum-api-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/dev-env/remix/ class=md-nav__link> Remix </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/dev-env/hardhat/ class=md-nav__link> Hardhat </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/dev-env/foundry/ class=md-nav__link> Foundry </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/dev-env/thirdweb/ class=md-nav__link> thirdweb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ethereum-api/libraries/ >Libraries</a> <label for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class="md-nav__list builders-toolkit-ethereum-api-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/libraries/ethersjs/ class=md-nav__link> Ethers.js </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/libraries/viem/ class=md-nav__link> viem </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/libraries/web3js/ class=md-nav__link> Web3.js </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/libraries/web3py/ class=md-nav__link> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/ethereum-api/precompiles/ >Precompiles</a> <label for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> Precompiles </label> <ul class="md-nav__list builders-toolkit-ethereum-api-precompiles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/precompiles/batch/ class=md-nav__link> Batch </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/precompiles/call-permit/ class=md-nav__link> Call Permit </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/precompiles/erc20/ class=md-nav__link> Native Token ERC-20 </a> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/precompiles/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../toolkit/ethereum-api/rpc/ class=md-nav__link> JSON-RPC Methods </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/substrate-api/ >Substrate Tools</a> <label for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> Substrate Tools </label> <ul class="md-nav__list builders-toolkit-substrate-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/substrate-api/dev-env/ >Dev Environments</a> <label for=__nav_2_5_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_2> <span class="md-nav__icon md-icon"></span> Dev Environments </label> <ul class="md-nav__list builders-toolkit-substrate-api-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/substrate-api/dev-env/chopsticks/ class=md-nav__link> Chopsticks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/substrate-api/libraries/ >Libraries</a> <label for=__nav_2_5_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_3> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class="md-nav__list builders-toolkit-substrate-api-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/substrate-api/libraries/polkadot-js-api/ class=md-nav__link> Polkadot.js API </a> </li> <li class=md-nav__item> <a href=../../../toolkit/substrate-api/libraries/sidecar-api/ class=md-nav__link> Sidecar API </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/substrate-api/wallets/ >Wallets</a> <label for=__nav_2_5_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_4> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-substrate-api-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/substrate-api/wallets/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../toolkit/substrate-api/wallets/subwallet/ class=md-nav__link> SubWallet </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/integrations/ >Integrations</a> <label for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class="md-nav__list builders-toolkit-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/integrations/indexers/ >Indexers</a> <label for=__nav_2_5_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_2> <span class="md-nav__icon md-icon"></span> Indexers </label> <ul class="md-nav__list builders-toolkit-integrations-indexers-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/integrations/indexers/sqd/ >SQD</a> <label for=__nav_2_5_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_2_2> <span class="md-nav__icon md-icon"></span> SQD </label> <ul class="md-nav__list builders-toolkit-integrations-indexers-sqd-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/integrations/indexers/sqd/quick-start/ class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../toolkit/integrations/indexers/sqd/erc20-transfers/ class=md-nav__link> Index ERC-20 Transfers </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/integrations/oracles/ >Oracles</a> <label for=__nav_2_5_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_3> <span class="md-nav__icon md-icon"></span> Oracles </label> <ul class="md-nav__list builders-toolkit-integrations-oracles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/integrations/oracles/acurast/ class=md-nav__link> Price Feeds with Acurast </a> </li> <li class=md-nav__item> <a href=../../../toolkit/integrations/oracles/band/ class=md-nav__link> Price Feeds with Band Protocol </a> </li> <li class=md-nav__item> <a href=../../../toolkit/integrations/oracles/phala/ class=md-nav__link> Price Feeds with Phala </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../toolkit/integrations/wallet-integrations/ >Wallets</a> <label for=__nav_2_5_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_4> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-integrations-wallet-integrations-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../toolkit/integrations/wallet-integrations/rainbowkit/ class=md-nav__link> Rainbowkit </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../account-management/ >Account Management</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Account Management </label> <ul class="md-nav__list builders-account-management-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../account-management/proxy-accounts/ class=md-nav__link> Proxy Accounts </a> </li> <li class=md-nav__item> <a href=../../../account-management/identity/ class=md-nav__link> On-Chain Identities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../tanssi-network/ >Network Essentials</a> <label for=__nav_2_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Network Essentials </label> <ul class="md-nav__list builders-tanssi-network-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../tanssi-network/testnet/ >TestNet</a> <label for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> TestNet </label> <ul class="md-nav__list builders-tanssi-network-testnet-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tanssi-network/testnet/dancebox/ class=md-nav__link> Dancebox </a> </li> <li class=md-nav__item> <a href=../../../tanssi-network/testnet/demo-evm-network/ class=md-nav__link> Demo EVM Network </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../tanssi-network/endpoints/ class=md-nav__link> Network Endpoints </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/ >Node Operators</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Node Operators </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/network-node/ >Run a Network Node</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Run a Network Node </label> <ul class="md-nav__list node-operators-network-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/network-node/rpc-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/network-node/rpc-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/ >Sequencers</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Sequencers </label> <ul class="md-nav__list node-operators-sequencers-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/onboarding/ >Onboarding</a> <label for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Onboarding </label> <ul class="md-nav__list node-operators-sequencers-onboarding-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/onboarding/run-a-sequencer/ >Run a Sequencer</a> <label for=__nav_3_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_2> <span class="md-nav__icon md-icon"></span> Run a Sequencer </label> <ul class="md-nav__list node-operators-sequencers-onboarding-run-a-sequencer-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/onboarding/run-a-sequencer/sequencers-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/onboarding/run-a-sequencer/sequencers-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/onboarding/account-setup/ class=md-nav__link> Set Up Your Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/operational-tasks/ >Operational Tasks</a> <label for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> Operational Tasks </label> <ul class="md-nav__list node-operators-sequencers-operational-tasks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/ >Upgrade Your Node</a> <label for=__nav_3_3_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_3_2> <span class="md-nav__icon md-icon"></span> Upgrade Your Node </label> <ul class="md-nav__list node-operators-sequencers-operational-tasks-upgrade-your-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/upgrade-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/upgrade-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/operational-tasks/proxy-accounts/ class=md-nav__link> Use a Proxy Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/sequencers/offboarding/ >Offboarding</a> <label for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> Offboarding </label> <ul class="md-nav__list node-operators-sequencers-offboarding-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/sequencers/offboarding/account/ class=md-nav__link> Decommission Your Account </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/operators/ >Operators</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Operators </label> <ul class="md-nav__list node-operators-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/operators/onboarding/ >Onboarding</a> <label for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> Onboarding </label> <ul class="md-nav__list node-operators-operators-onboarding-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/operators/onboarding/run-an-operator/ >Run an Operator</a> <label for=__nav_3_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2_2> <span class="md-nav__icon md-icon"></span> Run an Operator </label> <ul class="md-nav__list node-operators-operators-onboarding-run-an-operator-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/operators/onboarding/run-an-operator/operators-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/onboarding/run-an-operator/operators-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/onboarding/register-in-symbiotic/ class=md-nav__link> Register in Symbiotic </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/onboarding/opt-in-to-tanssi/ class=md-nav__link> Opt In to Tanssi </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/onboarding/account-setup/ class=md-nav__link> Set Up Your Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/operators/operational-tasks/ >Operational Tasks</a> <label for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> Operational Tasks </label> <ul class="md-nav__list node-operators-operators-operational-tasks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../node-operators/operators/operational-tasks/upgrade-your-node/ >Upgrade Your Node</a> <label for=__nav_3_4_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3_2> <span class="md-nav__icon md-icon"></span> Upgrade Your Node </label> <ul class="md-nav__list node-operators-operators-operational-tasks-upgrade-your-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../node-operators/operators/operational-tasks/upgrade-your-node/upgrade-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/operational-tasks/upgrade-your-node/upgrade-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../node-operators/operators/operational-tasks/proxy-accounts/ class=md-nav__link> Set Up a Proxy Account </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/ >Learn</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Learn </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/tanssi/ >Introduction to Tanssi</a> <label for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Introduction to Tanssi </label> <ul class="md-nav__list learn-tanssi-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/tanssi/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/tanssi/network-services/ >Network Services</a> <label for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Network Services </label> <ul class="md-nav__list learn-tanssi-network-services-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/tanssi/network-services/block-production/ class=md-nav__link> Block Production </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/tanssi/external-security-providers/ >External Security Providers</a> <label for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> External Security Providers </label> <ul class="md-nav__list learn-tanssi-external-security-providers-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/tanssi/external-security-providers/symbiotic/ class=md-nav__link> Ethereum with Symbiotic </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/tanssi/network-features/ >Network Features</a> <label for=__nav_4_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_5> <span class="md-nav__icon md-icon"></span> Network Features </label> <ul class="md-nav__list learn-tanssi-network-features-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/tanssi/network-features/staking/ class=md-nav__link> Staking for Block Production </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/framework/ >Network Development Framework</a> <label for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Network Development Framework </label> <ul class="md-nav__list learn-framework-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/framework/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../learn/framework/architecture/ class=md-nav__link> Framework Architecture </a> </li> <li class=md-nav__item> <a href=../../../../learn/framework/modules/ class=md-nav__link> Modularity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../learn/decentralized-networks/ >Tanssi-Powered Networks</a> <label for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Tanssi-Powered Networks </label> <ul class="md-nav__list learn-decentralized-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../learn/decentralized-networks/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../learn/decentralized-networks/included-templates/ class=md-nav__link> Included Templates </a> </li> <li class=md-nav__item> <a href=../../../../learn/decentralized-networks/runtime-features/ class=md-nav__link> Core Runtime Features </a> </li> <li class=md-nav__item> <a href=../../../../learn/decentralized-networks/tx-fees/ class=md-nav__link> Transaction Fees </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://www.tanssi.network/ class=md-nav__link> About Tanssi </a> </li> <li class=md-nav__item> <a href=https://apps.tanssi.network/dancebox class=md-nav__link> Tanssi TestNet </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Sections> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#creating-lottery-module-files class=md-nav__link> <span class=md-ellipsis> Creating the Lottery Module Files </span> </a> </li> <li class=md-nav__item> <a href=#configure-module-dependencies class=md-nav__link> <span class=md-ellipsis> Configure the Module's Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#adding-custom-logic class=md-nav__link> <span class=md-ellipsis> Adding Custom Logic </span> </a> <nav class=md-nav aria-label="Adding Custom Logic"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implementing-basic-structure class=md-nav__link> <span class=md-ellipsis> Implementing the Module Basic Structure </span> </a> </li> <li class=md-nav__item> <a href=#implementing-module-configuration class=md-nav__link> <span class=md-ellipsis> Implementing the Module Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementing-transactions class=md-nav__link> <span class=md-ellipsis> Implementing Transactions </span> </a> </li> <li class=md-nav__item> <a href=#implementing-custom-errors class=md-nav__link> <span class=md-ellipsis> Implementing Custom Errors </span> </a> </li> <li class=md-nav__item> <a href=#implementing-events class=md-nav__link> <span class=md-ellipsis> Implementing Events </span> </a> </li> <li class=md-nav__item> <a href=#implementing-storage class=md-nav__link> <span class=md-ellipsis> Implementing Storage for State Persistence </span> </a> </li> <li class=md-nav__item> <a href=#complete-module class=md-nav__link> <span class=md-ellipsis> The Complete Module </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configure-runtime class=md-nav__link> <span class=md-ellipsis> Configure the Runtime </span> </a> </li> </ul> </nav> </div><div class=feedback-actions-container><div class=feedback-section> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moondance-labs/tanssi-docs/issues/new/?title=[Feedback]+Adding%20a%20Custom-Made%20Module+-+/builders/build/customize/adding-custom-made-module/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> <div class=divider></div></form> </div><div class=edit-section> <a href=https://github.com/moondance-labs/tanssi-docs/edit/main/builders/build/customize/adding-custom-made-module.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg> Edit this page </a> </div> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset "> <h1 id=adding-custom-made-module>Adding a Custom-Made Module<a class=headerlink href=#adding-custom-made-module title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>By providing a comprehensive library of pre-built modules addressing many common requirements, the framework greatly simplifies the process of building a blockchain and accelerates the deployment and evolution into a Tanssi-powered network. However, addressing an innovative use case usually requires a development effort to fully meet the requirements, and, in Substrate, adding custom logic translates into writing and integrating runtime modules.</p> <p>The example presented in the <a href=/learn/framework/modules/#custom-module-example target=_blank>Modularity</a> article shows a simple lottery module exposing two transactions:</p> <ul> <li><strong>Buy tickets</strong> - this function manages a user's entry into the lottery. In essence, it verifies that the participant has a sufficient balance, is not already participating, and takes care of transferring funds to register the user for the lottery</li> <li><strong>Award prize</strong> - this function that handles a user entering into the lottery. At a high level, it fetches a pseudo-random number to obtain a winner and handles the award distribution</li> </ul> <p>The implementation of those transactions also uses storage, emits events, defines custom errors, and relies on other modules to handle currency (to charge for the tickets and transfer the total amount to the winner) and randomize the winner selection.</p> <p>In this article, the following steps, necessary to build and add the example module to the runtime, will be covered:</p> <ol> <li>Create the lottery module files (package)</li> <li>Configure the module's dependencies</li> <li>Adding custom logic</li> <li>Configure the runtime with the new module</li> </ol> <p>It is important to note that none of the code presented in this article is intended for production use.</p> <h2 id=checking-prerequisites>Checking Prerequisites<a class=headerlink href=#checking-prerequisites title="Permanent link">&para;</a></h2> <p>To follow the steps in this guide, you will need to have the following:</p> <ul> <li>Clone the <a href=https://github.com/moondance-labs/tanssi target=_blank>Tanssi repository</a> from Github</li> <li>Rust compiler and Cargo package manager</li> </ul> <p>You can read more about how to install Rust and Cargo is in the <a href=/builders/build/customize/prerequisites/#installing-rust target=_blank>prerequisites article</a>.</p> <h2 id=creating-lottery-module-files>Creating the Lottery Module Files<a class=headerlink href=#creating-lottery-module-files title="Permanent link">&para;</a></h2> <p>Before starting your coding process, it's essential to create the files containing your logic. Substrate modules are abstract and intended for reuse across different runtimes with various customizations. To achieve this, you'll use Cargo, Rust's package manager, to create the module as a new package.</p> <p>As mentioned in the prerequisites section, the first step is to clone the <a href=https://github.com/moondance-labs/tanssi target=_blank>Tanssi repository</a> and, from the root folder, navigate to <code>pallets</code>, where the module will be created.</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>container-chains/pallets
</code></pre></div> <p>Next, create the module package with Cargo:</p> <div class=highlight><pre><span></span><code>cargo<span class=w> </span>new<span class=w> </span>lottery-example
</code></pre></div> <p>By default, Cargo creates the new package in a folder with the provided name (<code>lottery-example</code>, in this case), containing a manifest file, <code>Cargo.toml</code>, and a <code>src</code> folder with a <code>main.rs</code> file. To respect the naming convention used in Substrate, the <code>main.rs</code> file is renamed to <code>lib.rs</code>:</p> <div class=highlight><pre><span></span><code>mv<span class=w> </span>lottery-example/src/main.rs<span class=w> </span>lottery-example/src/lib.rs
</code></pre></div> <p>Once you've executed all the commands, the module is created and ready to contain the custom logic that you'll be adding in the following sections.</p> <h2 id=configure-module-dependencies>Configure the Module's Dependencies<a class=headerlink href=#configure-module-dependencies title="Permanent link">&para;</a></h2> <p>Since the module functions as an independent package, it has its own Cargo.toml file where you must specify the module's attributes and dependencies.</p> <p>For instance, you can use attributes to specify details like the module's name, version, authors, and other pertinent information. For example, in the the <code>lottery-example</code> module, the <code>Cargo.toml</code> file can be configured as follows:</p> <div class=highlight><pre><span></span><code><span class=k>[package]</span>
<span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;module-lottery-example&quot;</span>
<span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;4.0.0-dev&quot;</span>
<span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Simple module example&quot;</span>
<span class=n>authors</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>]</span>
<span class=n>homepage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&quot;</span>
<span class=p>...</span>
</code></pre></div> <p>This file also defines the module's dependencies, such as the core functionality that allows seamless integration with the runtime and other modules, access to storage, event emission, and more.</p> <p>The full example of the <code>Cargo.toml</code> file sets, besides the attributes, the dependencies required by Substrate:</p> <details class=code> <summary>View the complete Cargo.toml file</summary> <div class=highlight><pre><span></span><code><span class=p>[</span><span class=n>package</span><span class=p>]</span>
<span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;module-lottery-example&quot;</span>
<span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;4.0.0-dev&quot;</span>
<span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Simple module example&quot;</span>
<span class=n>authors</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;&quot;</span><span class=p>]</span>
<span class=n>homepage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;&quot;</span>
<span class=n>edition</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;2021&quot;</span>
<span class=n>publish</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span>

<span class=p>[</span><span class=n>package</span><span class=p>.</span><span class=n>metadata</span><span class=p>.</span><span class=n>docs</span><span class=p>.</span><span class=n>rs</span><span class=p>]</span>
<span class=n>targets</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;x86_64-unknown-linux-gnu&quot;</span><span class=p>]</span>

<span class=p>[</span><span class=n>dependencies</span><span class=p>]</span>
<span class=n>codec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>package</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;parity-scale-codec&quot;</span><span class=p>,</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;3.6.1&quot;</span><span class=p>,</span><span class=w> </span><span class=n>default</span><span class=o>-</span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s>&quot;derive&quot;</span><span class=p>,</span>
<span class=p>]</span><span class=w> </span><span class=p>}</span>
<span class=n>scale</span><span class=o>-</span><span class=n>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;2.5.0&quot;</span><span class=p>,</span><span class=w> </span><span class=n>default</span><span class=o>-</span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;derive&quot;</span><span class=p>]</span><span class=w> </span><span class=p>}</span>
<span class=n>frame</span><span class=o>-</span><span class=n>benchmarking</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>    </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;4.0.0-dev&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>default</span><span class=o>-</span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>optional</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span>
<span class=p>}</span>
<span class=n>frame</span><span class=o>-</span><span class=n>support</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>    </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;4.0.0-dev&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>default</span><span class=o>-</span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span>
<span class=p>}</span>
<span class=n>frame</span><span class=o>-</span><span class=n>system</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>    </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;4.0.0-dev&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>default</span><span class=o>-</span><span class=n>features</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span>
<span class=p>}</span>

<span class=p>[</span><span class=n>dev</span><span class=o>-</span><span class=n>dependencies</span><span class=p>]</span>
<span class=n>sp</span><span class=o>-</span><span class=n>core</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;21.0.0&quot;</span><span class=p>,</span><span class=w> </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span><span class=p>}</span>
<span class=n>sp</span><span class=o>-</span><span class=n>io</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;23.0.0&quot;</span><span class=p>,</span><span class=w> </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span><span class=p>}</span>
<span class=n>sp</span><span class=o>-</span><span class=n>runtime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;24.0.0&quot;</span><span class=p>,</span><span class=w> </span><span class=n>git</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://github.com/paritytech/substrate.git&quot;</span><span class=p>,</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;polkadot-v1.0.0&quot;</span><span class=w> </span><span class=p>}</span>

<span class=p>[</span><span class=n>features</span><span class=p>]</span>
<span class=n>default</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;std&quot;</span><span class=p>]</span>
<span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s>&quot;codec/std&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s>&quot;frame-benchmarking?/std&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s>&quot;frame-support/std&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s>&quot;frame-system/std&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s>&quot;scale-info/std&quot;</span><span class=p>,</span>
<span class=p>]</span>
<span class=n>runtime</span><span class=o>-</span><span class=n>benchmarks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;frame-benchmarking/runtime-benchmarks&quot;</span><span class=p>]</span>
<span class=kr>try</span><span class=o>-</span><span class=n>runtime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s>&quot;frame-support/try-runtime&quot;</span><span class=p>]</span>
</code></pre></div> </details> <h2 id=adding-custom-logic>Adding Custom Logic<a class=headerlink href=#adding-custom-logic title="Permanent link">&para;</a></h2> <p>As presented in the <a href=/learn/framework/modules/#custom-modules target=_blank>custom-made module</a> section of the modularity article, creating a module involves implementing the following attribute macros, of which the first three are mandatory:</p> <ul> <li><strong><code>#[frame_support::pallet]</code></strong> - this attribute is the entry point that marks the module as usable in the runtime</li> <li><strong><code>#[pallet::pallet]</code></strong> - applied to a structure that is used to retrieve module information easily</li> <li><strong><code>#[pallet::config]</code></strong> - is a required attribute to define the configuration for the data types of the module</li> <li><strong><code>#[pallet::call]</code></strong> - this macro is used to define functions that will be exposed as transactions, allowing them to be dispatched to the runtime. It is here that the developers add their custom transactions and logic</li> <li><strong><code>#[pallet::error]</code></strong> - as transactions may not be successful (insufficient funds, as an error example), and for security reasons, a custom module can never end up throwing an exception, all the possible errors are to be identified and listed in an enum to be returned upon an unsuccessful execution</li> <li><strong><code>#[pallet::event]</code></strong> - events can be defined and used as a means to provide more information to the user</li> <li><strong><code>#[pallet::storage]</code></strong> - this macro is used to define elements that will be persisted in storage. As resources are scarce in a blockchain, it should be used wisely to store only sensible information</li> </ul> <h3 id=implementing-basic-structure>Implementing the Module Basic Structure<a class=headerlink href=#implementing-basic-structure title="Permanent link">&para;</a></h3> <p>The first two mandatory macros, <code>#[frame_support::pallet]</code> and <code>#[pallet::pallet]</code>, provide the basic structure of the module and are required to enable the module to be used in a Substrate runtime.</p> <p>The following snippet shows the general structure of a custom Substrate module.</p> <div class=highlight><pre><span></span><code><span class=cp>#[frame_support::pallet(dev_mode)]</span>
<span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>pallet</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=o>..</span><span class=p>.</span>
<span class=w>    </span><span class=cp>#[pallet::pallet]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>_</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// All the logic goes here</span>
<span class=p>}</span>
</code></pre></div> <p>The next step would be to add the third mandatory macro (<code>#[pallet::config]</code>) and all the custom logic, as shown in the following sections.</p> <h3 id=implementing-module-configuration>Implementing the Module Configuration<a class=headerlink href=#implementing-module-configuration title="Permanent link">&para;</a></h3> <p>To make the modules highly adaptable, their configuration is abstract enough to allow them to be adapted to the specific requirements of the use case the runtime implements.</p> <p>The implementation of the <code>#[pallet::config]</code> macro is mandatory and sets the module's dependency on other modules and the types and values specified by the runtime-specific settings. More about module dependencies is in the <a href=https://docs.substrate.io/build/pallet-coupling target=_blank>Substrate documentation</a>.</p> <p>In the custom <code>lottery-example</code> module you are building, the module depends on other modules to manage the currency and the random function to select the winner. The module also reads and uses the ticket price and the maximum number of participants directly from the runtime settings. Consequently, the configuration needs to include these dependencies:</p> <ul> <li><strong>Events</strong> - the module depends on the runtime's definition of an event to be able to emit them</li> <li><strong>Currency</strong> - the <code>lottery-example</code> module needs to be able to transfer funds, hence, it needs the definition of the currency system from the runtime</li> <li><strong>Randomness</strong> - this module is used to fairly select the winner of the prize from the list of participants. It generates the random numbers using the past block hashes and the current block's number as seed</li> <li><strong>Ticket cost</strong> - the price to charge the buyers that participate in the lottery</li> <li><strong>Maximum number of participants</strong> - the top limit of participants allowed in each lottery round</li> <li><strong>Module Id</strong> - the module unique identifier is required to access the module account to hold the participant's funds until transferred to the winner</li> </ul> <p>The implementation of the described configuration for this example is shown in the following code snippet:</p> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::config]</span>
<span class=k>pub</span><span class=w> </span><span class=k>trait</span><span class=w> </span><span class=n>Config</span>: <span class=nc>frame_system</span>::<span class=n>Config</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=c1>// Event definition</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>RuntimeEvent</span>: <span class=nb>From</span><span class=o>&lt;</span><span class=n>Event</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=w> </span>
<span class=w>        </span><span class=o>+</span><span class=w> </span><span class=n>IsType</span><span class=o>&lt;&lt;</span><span class=bp>Self</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>frame_system</span>::<span class=n>Config</span><span class=o>&gt;</span>::<span class=n>RuntimeEvent</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Currency </span>
<span class=w>    </span><span class=k>type</span> <span class=nc>Currency</span>: <span class=nc>Currency</span><span class=o>&lt;</span><span class=bp>Self</span>::<span class=n>AccountId</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Randomness</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>MyRandomness</span>: <span class=nc>Randomness</span><span class=o>&lt;</span><span class=bp>Self</span>::<span class=n>Hash</span><span class=p>,</span><span class=w> </span><span class=n>BlockNumberFor</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Ticket cost</span>
<span class=w>    </span><span class=cp>#[pallet::constant]</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>TicketCost</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=n>BalanceOf</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Maximum number of participants</span>
<span class=w>    </span><span class=cp>#[pallet::constant]</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>MaxParticipants</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=kt>u32</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Module Id</span>
<span class=w>    </span><span class=cp>#[pallet::constant]</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>PalletId</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=n>PalletId</span><span class=o>&gt;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>This abstract definition of dependencies is crucial to avoid coupling to a specific use case and to enable the modules to serve as basic building blocks for Substrate networks.</p> <h3 id=implementing-transactions>Implementing Transactions<a class=headerlink href=#implementing-transactions title="Permanent link">&para;</a></h3> <p>Calls represent the behavior a runtime exposes in the form of transactions that can be dispatched for processing, exposing the custom logic added to the module.</p> <p>Every call is enclosed within the <code>#[pallet::call]</code> macro, and present the following elements:</p> <ul> <li><strong>Call Index</strong> - is a mandatory unique identifier for every dispatchable call</li> <li><strong>Weight</strong> - is a measure of computational effort an extrinsic takes when being processed. More about weights is in the <a href=https://docs.substrate.io/build/tx-weights-fees target=_blank>Substrate documentation</a></li> <li><strong>Origin</strong> - identifies the signing account making the call</li> <li><strong>Result</strong> - the return value of the call, which might be an <code>Error</code> if anything goes wrong</li> </ul> <p>The following snippet presents the general structure of the mentioned macro implementation and the call elements:</p> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::call]</span>
<span class=k>impl</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=n>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(0)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>one_call</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>}</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(1)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>another_call</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Other calls</span>
<span class=p>}</span>
</code></pre></div> <p>In this <code>lottery-example</code> module, we defined two calls with the following logic:</p> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::call]</span>
<span class=k>impl</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=n>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(0)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>buy_ticket</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>        </span><span class=c1>// 2. Checks that the user has enough balance to afford the ticket price</span>
<span class=w>        </span><span class=c1>// 3. Checks that the user is not already participating</span>
<span class=w>        </span><span class=c1>// 4. Adds the user as a new participant for the prize</span>
<span class=w>        </span><span class=c1>// 5. Transfers the ticket cost to the module&#39;s account, to be hold until transferred to the winner</span>
<span class=w>        </span><span class=c1>// 6. Notify the event</span>

<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(1)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>award_prize</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>        </span><span class=c1>// 2. Gets a random number from the randomness module</span>
<span class=w>        </span><span class=c1>// 3. Selects the winner from the participants lit</span>
<span class=w>        </span><span class=c1>// 4. Transfers the total prize to the winner&#39;s account</span>
<span class=w>        </span><span class=c1>// 5. Resets the participants list, and gets ready for another lottery round</span>

<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>These calls also emit events to keep the user informed and can return errors should any of the validations go wrong.</p> <p>Here is the complete implementation of the calls with the custom lottery logic:</p> <details class=code> <summary>View the complete calls code</summary> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::call]</span>
<span class=k>impl</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=n>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(0)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>buy_ticket</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>buyer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ensure_signed</span><span class=p>(</span><span class=n>origin</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// 2. Checks that the user has enough balance to afford the ticket price</span>
<span class=w>        </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>            </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>free_balance</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>T</span>::<span class=n>TicketCost</span>::<span class=n>get</span><span class=p>(),</span>
<span class=w>            </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>NotEnoughCurrency</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// 3. Checks that the user is not already participating</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=kd>let</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                </span><span class=o>!</span><span class=n>participants</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>),</span>
<span class=w>                </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>AccountAlreadyParticipating</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=c1>// 4. Adds the user as a new participant for the prize</span>
<span class=w>        </span><span class=k>match</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nb>Some</span><span class=p>(</span><span class=k>mut</span><span class=w> </span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>                </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                    </span><span class=n>participants</span><span class=p>.</span><span class=n>try_push</span><span class=p>(</span><span class=n>buyer</span><span class=p>.</span><span class=n>clone</span><span class=p>()).</span><span class=n>is_ok</span><span class=p>(),</span><span class=w> </span>
<span class=w>                    </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>CanNotAddParticipant</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>                </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>set</span><span class=p>(</span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>));</span>
<span class=w>            </span><span class=p>},</span><span class=w> </span>
<span class=w>            </span><span class=nb>None</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>participants</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BoundedVec</span>::<span class=n>new</span><span class=p>();</span>
<span class=w>                </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                    </span><span class=n>participants</span><span class=p>.</span><span class=n>try_push</span><span class=p>(</span><span class=n>buyer</span><span class=p>.</span><span class=n>clone</span><span class=p>()).</span><span class=n>is_ok</span><span class=p>(),</span><span class=w> </span>
<span class=w>                    </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>CanNotAddParticipant</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>                </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>set</span><span class=p>(</span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>));</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>};</span>

<span class=w>        </span><span class=c1>// 5. Transfers the ticket cost to the module&#39;s account</span>
<span class=w>        </span><span class=c1>// to be hold until transferred to the winner</span>
<span class=w>        </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>transfer</span><span class=p>(</span>
<span class=w>            </span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>,</span><span class=w> </span>
<span class=w>            </span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>(),</span><span class=w> </span>
<span class=w>            </span><span class=n>T</span>::<span class=n>TicketCost</span>::<span class=n>get</span><span class=p>(),</span><span class=w> </span>
<span class=w>            </span><span class=n>ExistenceRequirement</span>::<span class=n>KeepAlive</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// 6. Notify the event</span>
<span class=w>        </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>TicketBought</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>who</span>: <span class=nc>buyer</span><span class=w> </span><span class=p>});</span>
<span class=w>        </span><span class=nb>Ok</span><span class=p>(())</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=cp>#[pallet::call_index(1)]</span>
<span class=w>    </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>award_prize</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>_who</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ensure_root</span><span class=p>(</span><span class=n>origin</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>        </span><span class=k>match</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span>

<span class=w>                </span><span class=c1>// 2. Gets a random number from the randomness module</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>nonce</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_and_increment_nonce</span><span class=p>();</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=p>(</span><span class=n>random_seed</span><span class=p>,</span><span class=w> </span><span class=n>_</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>T</span>::<span class=n>MyRandomness</span>::<span class=n>random</span><span class=p>(</span><span class=o>&amp;</span><span class=n>nonce</span><span class=p>);</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>random_number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&lt;</span><span class=kt>u32</span><span class=o>&gt;</span>::<span class=n>decode</span><span class=p>(</span><span class=o>&amp;</span><span class=k>mut</span><span class=w> </span><span class=n>random_seed</span><span class=p>.</span><span class=n>as_ref</span><span class=p>())</span>
<span class=w>                    </span><span class=p>.</span><span class=n>expect</span><span class=p>(</span><span class=s>&quot;secure hashes should always be bigger than u32; qed&quot;</span><span class=p>);</span>

<span class=w>                </span><span class=c1>// 3. Selects the winner from the participants lit</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>winner_index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random_number</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>participants</span><span class=p>.</span><span class=n>len</span><span class=p>();</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>winner</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>participants</span><span class=p>.</span><span class=n>as_slice</span><span class=p>().</span><span class=n>get</span><span class=p>(</span><span class=n>winner_index</span><span class=p>).</span><span class=n>unwrap</span><span class=p>();</span>

<span class=w>                </span><span class=c1>// 4. Transfers the total prize to the winner&#39;s account</span>
<span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>prize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>free_balance</span><span class=p>(</span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>());</span>
<span class=w>                </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>transfer</span><span class=p>(</span>
<span class=w>                    </span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>(),</span><span class=w> </span>
<span class=w>                    </span><span class=o>&amp;</span><span class=n>winner</span><span class=p>,</span><span class=w> </span>
<span class=w>                    </span><span class=n>prize</span><span class=p>,</span><span class=w> </span>
<span class=w>                    </span><span class=n>ExistenceRequirement</span>::<span class=n>AllowDeath</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>                </span><span class=c1>// 5. Resets the participants list, and gets ready for another lottery round</span>
<span class=w>                </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>kill</span><span class=p>();</span>

<span class=w>                </span><span class=c1>// 6. Notify the event</span>
<span class=w>                </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>PrizeAwarded</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>winner</span>: <span class=nc>winner</span><span class=p>.</span><span class=n>clone</span><span class=p>()</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>);</span>
<span class=w>            </span><span class=p>},</span><span class=w> </span>
<span class=w>            </span><span class=nb>None</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=c1>// Notify the event (No participants)</span>
<span class=w>                </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>ThereAreNoParticipants</span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>};</span>

<span class=w>        </span><span class=nb>Ok</span><span class=p>(())</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </details> <h3 id=implementing-custom-errors>Implementing Custom Errors<a class=headerlink href=#implementing-custom-errors title="Permanent link">&para;</a></h3> <p>The <code>#[pallet::error]</code> macro is used to annotate an enumeration of potential errors that could occur during execution. It is crucial for security to ensure that all error situations are handled gracefully without causing the runtime to crash.</p> <p>The following example of this macro implementation shows the errors that might occur in the lottery module:</p> <div class=highlight><pre><span></span><code><span class=c1>// Errors inform users that something went wrong.</span>
<span class=cp>#[pallet::error]</span>
<span class=k>pub</span><span class=w> </span><span class=k>enum</span> <span class=nc>Error</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>NotEnoughCurrency</span><span class=p>,</span>
<span class=w>    </span><span class=n>AccountAlreadyParticipating</span><span class=p>,</span>
<span class=w>    </span><span class=n>CanNotAddParticipant</span><span class=p>,</span>
<span class=p>}</span>
</code></pre></div> <h3 id=implementing-events>Implementing Events<a class=headerlink href=#implementing-events title="Permanent link">&para;</a></h3> <p>The <code>#[pallet::event]</code> macro is applied to an enumeration of events to inform the user of any changes in the state or important actions that happened during the execution in the runtime.</p> <p>As an example, for the <code>lottery-example</code> module, this macro could be configured with the following events:</p> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::event]</span>
<span class=cp>#[pallet::generate_deposit(pub(super) fn deposit_event)]</span>
<span class=k>pub</span><span class=w> </span><span class=k>enum</span> <span class=nc>Event</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=sd>/// Event emitted when a ticket is bought</span>
<span class=w>    </span><span class=n>TicketBought</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>who</span>: <span class=nc>T</span>::<span class=n>AccountId</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=sd>/// Event emitted when the prize is awarded</span>
<span class=w>    </span><span class=n>PrizeAwarded</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>winner</span>: <span class=nc>T</span>::<span class=n>AccountId</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=sd>/// Event emitted when there are no participants</span>
<span class=w>    </span><span class=n>ThereAreNoParticipants</span><span class=p>,</span>
<span class=p>}</span>
</code></pre></div> <h3 id=implementing-storage>Implementing Storage for State Persistence<a class=headerlink href=#implementing-storage title="Permanent link">&para;</a></h3> <p>The <code>#[pallet::storage]</code> macro initializes a runtime storage structure. In the heavily constrained environment of blockchains, deciding what to store and which structure to use can be critical in terms of performance. More on this topic is covered in the <a href=https://docs.substrate.io/build/runtime-storage target=_blank>Substrate documentation</a>.</p> <p>In this example, the <code>lottery-example</code> module needs a basic value storage structure to persist the list of participants in a bounded capacity vector (<a href=https://crates.parity.io/frame_support/storage/bounded_vec/struct.BoundedVec.html target=_blank>BoundedVec</a>). This can be initialized as follows:</p> <div class=highlight><pre><span></span><code><span class=cp>#[pallet::storage]</span>
<span class=cp>#[pallet::getter(fn get_participants)]</span>
<span class=k>pub</span><span class=p>(</span><span class=k>super</span><span class=p>)</span><span class=w> </span><span class=k>type</span> <span class=nc>Participants</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StorageValue</span><span class=o>&lt;</span>
<span class=w>    </span><span class=n>_</span><span class=p>,</span>
<span class=w>    </span><span class=n>BoundedVec</span><span class=o>&lt;</span><span class=n>T</span>::<span class=n>AccountId</span><span class=p>,</span><span class=w> </span><span class=n>T</span>::<span class=n>MaxParticipants</span><span class=o>&gt;</span><span class=p>,</span>
<span class=w>    </span><span class=n>OptionQuery</span>
<span class=o>&gt;</span><span class=p>;</span>
</code></pre></div> <h3 id=complete-module>The Complete Module<a class=headerlink href=#complete-module title="Permanent link">&para;</a></h3> <p>To put all the pieces together, after implementing all the required macros and adding the custom logic, the module is now complete and ready to be used in the runtime.</p> <details class=code> <summary>View the complete module file</summary> <div class=highlight><pre><span></span><code><span class=cp>#![cfg_attr(not(feature = </span><span class=s>&quot;std&quot;</span><span class=cp>), no_std)]</span>

<span class=sd>/// Learn more about FRAME and the core library of Substrate FRAME pallets:</span>
<span class=sd>/// &lt;https://docs.substrate.io/reference/frame-pallets/&gt;</span>
<span class=k>pub</span><span class=w> </span><span class=k>use</span><span class=w> </span><span class=n>pallet</span>::<span class=o>*</span><span class=p>;</span>

<span class=cp>#[frame_support::pallet(dev_mode)]</span>
<span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>pallet</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=k>use</span><span class=w> </span><span class=k>super</span>::<span class=o>*</span><span class=p>;</span>
<span class=w>    </span><span class=k>use</span><span class=w> </span><span class=n>frame_support</span>::<span class=n>pallet_prelude</span>::<span class=p>{</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=n>ValueQuery</span><span class=p>,</span><span class=w> </span><span class=n>OptionQuery</span><span class=p>};</span>
<span class=w>    </span><span class=k>use</span><span class=w> </span><span class=n>frame_system</span>::<span class=n>pallet_prelude</span>::<span class=o>*</span><span class=p>;</span>
<span class=w>    </span><span class=k>use</span><span class=w> </span><span class=n>scale_info</span>::<span class=n>prelude</span>::<span class=n>vec</span>::<span class=nb>Vec</span><span class=p>;</span>

<span class=w>    </span><span class=k>use</span><span class=w> </span><span class=n>frame_support</span>::
    <span class=p>{</span>
<span class=w>        </span><span class=n>sp_runtime</span>::<span class=n>traits</span>::<span class=n>AccountIdConversion</span><span class=p>,</span>
<span class=w>        </span><span class=n>traits</span>:: <span class=p>{</span>
<span class=w>            </span><span class=n>Currency</span><span class=p>,</span><span class=w> </span><span class=n>ExistenceRequirement</span><span class=p>,</span><span class=w> </span><span class=n>Randomness</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=n>PalletId</span><span class=p>,</span>
<span class=w>    </span><span class=p>};</span>

<span class=w>    </span><span class=k>type</span> <span class=nc>BalanceOf</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span>
<span class=w>        </span><span class=o>&lt;&lt;</span><span class=n>T</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Config</span><span class=o>&gt;</span>::<span class=n>Currency</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Currency</span><span class=o>&lt;&lt;</span><span class=n>T</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>frame_system</span>::<span class=n>Config</span><span class=o>&gt;</span>::<span class=n>AccountId</span><span class=o>&gt;&gt;</span>::<span class=n>Balance</span><span class=p>;</span>

<span class=w>    </span><span class=cp>#[pallet::pallet]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>_</span><span class=p>);</span>

<span class=w>    </span><span class=sd>/// Configure the module by specifying the parameters and types on which it depends.</span>
<span class=w>    </span><span class=cp>#[pallet::config]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>trait</span><span class=w> </span><span class=n>Config</span>: <span class=nc>frame_system</span>::<span class=n>Config</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=c1>// Event definition</span>
<span class=w>        </span><span class=k>type</span> <span class=nc>RuntimeEvent</span>: <span class=nb>From</span><span class=o>&lt;</span><span class=n>Event</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=w> </span>
<span class=w>            </span><span class=o>+</span><span class=w> </span><span class=n>IsType</span><span class=o>&lt;&lt;</span><span class=bp>Self</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>frame_system</span>::<span class=n>Config</span><span class=o>&gt;</span>::<span class=n>RuntimeEvent</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// Currency </span>
<span class=w>        </span><span class=k>type</span> <span class=nc>Currency</span>: <span class=nc>Currency</span><span class=o>&lt;</span><span class=bp>Self</span>::<span class=n>AccountId</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// Randomness</span>
<span class=w>        </span><span class=k>type</span> <span class=nc>MyRandomness</span>: <span class=nc>Randomness</span><span class=o>&lt;</span><span class=bp>Self</span>::<span class=n>Hash</span><span class=p>,</span><span class=w> </span><span class=n>BlockNumberFor</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// Ticket cost</span>
<span class=w>        </span><span class=cp>#[pallet::constant]</span>
<span class=w>        </span><span class=k>type</span> <span class=nc>TicketCost</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=n>BalanceOf</span><span class=o>&lt;</span><span class=bp>Self</span><span class=o>&gt;&gt;</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// Maximum number of participants</span>
<span class=w>        </span><span class=cp>#[pallet::constant]</span>
<span class=w>        </span><span class=k>type</span> <span class=nc>MaxParticipants</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=kt>u32</span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>        </span><span class=c1>// Module Id</span>
<span class=w>        </span><span class=cp>#[pallet::constant]</span>
<span class=w>        </span><span class=k>type</span> <span class=nc>PalletId</span>: <span class=nc>Get</span><span class=o>&lt;</span><span class=n>PalletId</span><span class=o>&gt;</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// The pallet&#39;s runtime storage items.</span>
<span class=w>    </span><span class=cp>#[pallet::storage]</span>
<span class=w>    </span><span class=cp>#[pallet::getter(fn get_participants)]</span>
<span class=w>    </span><span class=k>pub</span><span class=p>(</span><span class=k>super</span><span class=p>)</span><span class=w> </span><span class=k>type</span> <span class=nc>Participants</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StorageValue</span><span class=o>&lt;</span>
<span class=w>        </span><span class=n>_</span><span class=p>,</span>
<span class=w>        </span><span class=n>BoundedVec</span><span class=o>&lt;</span><span class=n>T</span>::<span class=n>AccountId</span><span class=p>,</span><span class=w> </span><span class=n>T</span>::<span class=n>MaxParticipants</span><span class=o>&gt;</span><span class=p>,</span>
<span class=w>        </span><span class=n>OptionQuery</span>
<span class=w>    </span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=cp>#[pallet::storage]</span>
<span class=w>    </span><span class=cp>#[pallet::getter(fn get_nonce)]</span>
<span class=w>    </span><span class=k>pub</span><span class=p>(</span><span class=k>super</span><span class=p>)</span><span class=w> </span><span class=k>type</span> <span class=nc>Nonce</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StorageValue</span><span class=o>&lt;</span>
<span class=w>        </span><span class=n>_</span><span class=p>,</span>
<span class=w>        </span><span class=kt>u64</span><span class=p>,</span>
<span class=w>        </span><span class=n>ValueQuery</span>
<span class=w>    </span><span class=o>&gt;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Pallets use events to inform users when important changes are made.</span>
<span class=w>    </span><span class=c1>// https://docs.substrate.io/main-docs/build/events-errors/</span>
<span class=w>    </span><span class=cp>#[pallet::event]</span>
<span class=w>    </span><span class=cp>#[pallet::generate_deposit(pub(super) fn deposit_event)]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>enum</span> <span class=nc>Event</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=sd>/// Event emitted when a ticket is bought</span>
<span class=w>        </span><span class=n>TicketBought</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>who</span>: <span class=nc>T</span>::<span class=n>AccountId</span><span class=w> </span><span class=p>},</span>
<span class=w>        </span><span class=sd>/// Event emitted when the prize is awarded</span>
<span class=w>        </span><span class=n>PrizeAwarded</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>winner</span>: <span class=nc>T</span>::<span class=n>AccountId</span><span class=w> </span><span class=p>},</span>
<span class=w>        </span><span class=sd>/// Event emitted when the prize is to be awarded, but there are no participants</span>
<span class=w>        </span><span class=n>ThereAreNoParticipants</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Errors inform users that something went wrong</span>
<span class=w>    </span><span class=cp>#[pallet::error]</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>enum</span> <span class=nc>Error</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>NotEnoughCurrency</span><span class=p>,</span>
<span class=w>        </span><span class=n>AccountAlreadyParticipating</span><span class=p>,</span>
<span class=w>        </span><span class=n>CanNotAddParticipant</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=cp>#[pallet::call]</span>
<span class=w>    </span><span class=k>impl</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=n>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=cp>#[pallet::call_index(0)]</span>
<span class=w>        </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>buy_ticket</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>            </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=n>buyer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ensure_signed</span><span class=p>(</span><span class=n>origin</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>            </span><span class=c1>// 2. Checks that the user has enough balance to afford the ticket price</span>
<span class=w>            </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>free_balance</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>T</span>::<span class=n>TicketCost</span>::<span class=n>get</span><span class=p>(),</span>
<span class=w>                </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>NotEnoughCurrency</span>
<span class=w>            </span><span class=p>);</span>

<span class=w>            </span><span class=c1>// 3. Checks that the user is not already participating</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=kd>let</span><span class=w> </span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                    </span><span class=o>!</span><span class=n>participants</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>),</span>
<span class=w>                    </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>AccountAlreadyParticipating</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>

<span class=w>            </span><span class=c1>// 4. Adds the user as a new participant for the prize</span>
<span class=w>            </span><span class=k>match</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nb>Some</span><span class=p>(</span><span class=k>mut</span><span class=w> </span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>                    </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                        </span><span class=n>participants</span><span class=p>.</span><span class=n>try_push</span><span class=p>(</span><span class=n>buyer</span><span class=p>.</span><span class=n>clone</span><span class=p>()).</span><span class=n>is_ok</span><span class=p>(),</span><span class=w> </span>
<span class=w>                        </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>CanNotAddParticipant</span>
<span class=w>                    </span><span class=p>);</span>
<span class=w>                    </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>set</span><span class=p>(</span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>));</span>
<span class=w>                </span><span class=p>},</span><span class=w> </span>
<span class=w>                </span><span class=nb>None</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>participants</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BoundedVec</span>::<span class=n>new</span><span class=p>();</span>
<span class=w>                    </span><span class=n>ensure</span><span class=o>!</span><span class=p>(</span>
<span class=w>                        </span><span class=n>participants</span><span class=p>.</span><span class=n>try_push</span><span class=p>(</span><span class=n>buyer</span><span class=p>.</span><span class=n>clone</span><span class=p>()).</span><span class=n>is_ok</span><span class=p>(),</span><span class=w> </span>
<span class=w>                        </span><span class=n>Error</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>CanNotAddParticipant</span>
<span class=w>                    </span><span class=p>);</span>
<span class=w>                    </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>set</span><span class=p>(</span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>));</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>};</span>

<span class=w>            </span><span class=c1>// 5. Transfers the ticket cost to the module&#39;s account</span>
<span class=w>            </span><span class=c1>// to be hold until transferred to the winner</span>
<span class=w>            </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>transfer</span><span class=p>(</span>
<span class=w>                </span><span class=o>&amp;</span><span class=n>buyer</span><span class=p>,</span><span class=w> </span>
<span class=w>                </span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>(),</span><span class=w> </span>
<span class=w>                </span><span class=n>T</span>::<span class=n>TicketCost</span>::<span class=n>get</span><span class=p>(),</span><span class=w> </span>
<span class=w>                </span><span class=n>ExistenceRequirement</span>::<span class=n>KeepAlive</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>            </span><span class=c1>// 6. Notify the event</span>
<span class=w>            </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>TicketBought</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>who</span>: <span class=nc>buyer</span><span class=w> </span><span class=p>});</span>
<span class=w>            </span><span class=nb>Ok</span><span class=p>(())</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=cp>#[pallet::call_index(1)]</span>
<span class=w>        </span><span class=cp>#[pallet::weight(0)]</span>
<span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>award_prize</span><span class=p>(</span><span class=n>origin</span>: <span class=nc>OriginFor</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>DispatchResult</span><span class=w> </span><span class=p>{</span>

<span class=w>            </span><span class=c1>// 1. Validates the origin signature</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=n>_who</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ensure_root</span><span class=p>(</span><span class=n>origin</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>            </span><span class=k>match</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_participants</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nb>Some</span><span class=p>(</span><span class=n>participants</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w> </span>

<span class=w>                    </span><span class=c1>// 2. Gets a random number from the randomness module</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=n>nonce</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>Self</span>::<span class=n>get_and_increment_nonce</span><span class=p>();</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=p>(</span><span class=n>random_seed</span><span class=p>,</span><span class=w> </span><span class=n>_</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>T</span>::<span class=n>MyRandomness</span>::<span class=n>random</span><span class=p>(</span><span class=o>&amp;</span><span class=n>nonce</span><span class=p>);</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=n>random_number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&lt;</span><span class=kt>u32</span><span class=o>&gt;</span>::<span class=n>decode</span><span class=p>(</span><span class=o>&amp;</span><span class=k>mut</span><span class=w> </span><span class=n>random_seed</span><span class=p>.</span><span class=n>as_ref</span><span class=p>())</span>
<span class=w>                        </span><span class=p>.</span><span class=n>expect</span><span class=p>(</span><span class=s>&quot;secure hashes should always be bigger than u32; qed&quot;</span><span class=p>);</span>

<span class=w>                    </span><span class=c1>// 3. Selects the winner from the participants lit</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=n>winner_index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random_number</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>participants</span><span class=p>.</span><span class=n>len</span><span class=p>();</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=n>winner</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>participants</span><span class=p>.</span><span class=n>as_slice</span><span class=p>().</span><span class=n>get</span><span class=p>(</span><span class=n>winner_index</span><span class=p>).</span><span class=n>unwrap</span><span class=p>();</span>

<span class=w>                    </span><span class=c1>// 4. Transfers the total prize to the winner&#39;s account</span>
<span class=w>                    </span><span class=kd>let</span><span class=w> </span><span class=n>prize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>free_balance</span><span class=p>(</span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>());</span>
<span class=w>                    </span><span class=n>T</span>::<span class=n>Currency</span>::<span class=n>transfer</span><span class=p>(</span>
<span class=w>                        </span><span class=o>&amp;</span><span class=bp>Self</span>::<span class=n>get_pallet_account</span><span class=p>(),</span><span class=w> </span>
<span class=w>                        </span><span class=o>&amp;</span><span class=n>winner</span><span class=p>,</span><span class=w> </span>
<span class=w>                        </span><span class=n>prize</span><span class=p>,</span><span class=w> </span>
<span class=w>                        </span><span class=n>ExistenceRequirement</span>::<span class=n>AllowDeath</span><span class=p>)</span><span class=o>?</span><span class=p>;</span>

<span class=w>                    </span><span class=c1>// 5. Resets the participants list, and gets ready for another lottery round</span>
<span class=w>                    </span><span class=n>Participants</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>kill</span><span class=p>();</span>

<span class=w>                    </span><span class=c1>// 6. Notify the event</span>
<span class=w>                    </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>PrizeAwarded</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>winner</span>: <span class=nc>winner</span><span class=p>.</span><span class=n>clone</span><span class=p>()</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>);</span>
<span class=w>                </span><span class=p>},</span><span class=w> </span>
<span class=w>                </span><span class=nb>None</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// Notify the event (No participants)</span>
<span class=w>                    </span><span class=bp>Self</span>::<span class=n>deposit_event</span><span class=p>(</span><span class=n>Event</span>::<span class=n>ThereAreNoParticipants</span><span class=p>);</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>};</span>

<span class=w>            </span><span class=nb>Ok</span><span class=p>(())</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>impl</span><span class=o>&lt;</span><span class=n>T</span>: <span class=nc>Config</span><span class=o>&gt;</span><span class=w> </span><span class=n>Pallet</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>

<span class=w>        </span><span class=k>fn</span> <span class=nf>get_pallet_account</span><span class=p>()</span><span class=w> </span>-&gt; <span class=nc>T</span>::<span class=n>AccountId</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>T</span>::<span class=n>PalletId</span>::<span class=n>get</span><span class=p>().</span><span class=n>into_account_truncating</span><span class=p>()</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=k>fn</span> <span class=nf>get_and_increment_nonce</span><span class=p>()</span><span class=w> </span>-&gt; <span class=nb>Vec</span><span class=o>&lt;</span><span class=kt>u8</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=n>nonce</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Nonce</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>get</span><span class=p>();</span>
<span class=w>            </span><span class=n>Nonce</span>::<span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>::<span class=n>put</span><span class=p>(</span><span class=n>nonce</span><span class=p>.</span><span class=n>wrapping_add</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span>
<span class=w>            </span><span class=n>nonce</span><span class=p>.</span><span class=n>encode</span><span class=p>()</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </details> <h2 id=configure-runtime>Configure the Runtime<a class=headerlink href=#configure-runtime title="Permanent link">&para;</a></h2> <p>Finally, with the module finished, it can be included in the runtime. By doing so, the transactions <code>buy_tickets</code> and <code>award_prize</code> will be callable by the users. This also means that the <a href=/builders/toolkit/substrate-api/libraries/polkadot-js-api/ target=_blank>Polkadot.js API</a> will be decorated with this module and all the available calls that it contains.</p> <p>To configure the runtime, open the <code>lib.rs</code> file, which contains the definition for the runtime of the included template and is located (in case of using the EVM-compatible) in the folder:</p> <div class=highlight><pre><span></span><code>*/container-chains/templates/frontier/runtime/src/
</code></pre></div> <p>To add the lottery module, configure the modules as follows:</p> <div class=highlight><pre><span></span><code><span class=c1>// Add the configuration for randomness module. No parameters needed.</span>
<span class=k>impl</span><span class=w> </span><span class=n>pallet_insecure_randomness_collective_flip</span>::<span class=n>Config</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>Runtime</span><span class=w> </span><span class=p>{</span>
<span class=p>}</span>

<span class=c1>// Custom module id</span>
<span class=n>parameter_types</span><span class=o>!</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>PalletId</span>: <span class=nc>PalletId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PalletId</span><span class=p>(</span><span class=o>*</span><span class=s>b&quot;loex5678&quot;</span><span class=p>);</span>
<span class=p>}</span>

<span class=c1>// Add configuration for the lottery module</span>
<span class=k>impl</span><span class=w> </span><span class=n>pallet_lottery_example</span>::<span class=n>Config</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>Runtime</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>RuntimeEvent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RuntimeEvent</span><span class=p>;</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>Currency</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Balances</span><span class=p>;</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>TicketCost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ConstU128</span><span class=o>&lt;</span><span class=mi>1000000000000000</span><span class=o>&gt;</span><span class=p>;</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>PalletId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PalletId</span><span class=p>;</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>MaxParticipants</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ConstU32</span><span class=o>&lt;</span><span class=mi>500</span><span class=o>&gt;</span><span class=p>;</span>
<span class=w>    </span><span class=k>type</span> <span class=nc>MyRandomness</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RandomCollectiveFlip</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>With the modules configured, add the macro <code>construct_runtime!</code> (that defines the modules that will be included when building the runtime) and the randomness and lottery modules.</p> <div class=highlight><pre><span></span><code><span class=n>construct_runtime</span><span class=o>!</span><span class=p>(</span>
<span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Runtime</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=o>..</span><span class=p>.</span>
<span class=w>        </span><span class=c1>// Include the custom logic from the pallet-template in the runtime.</span>
<span class=w>        </span><span class=n>RandomCollectiveFlip</span>: <span class=nc>pallet_insecure_randomness_collective_flip</span><span class=p>,</span>
<span class=w>        </span><span class=n>Lottery</span>: <span class=nc>pallet_lottery_example</span><span class=p>,</span>
<span class=w>        </span><span class=o>..</span><span class=p>.</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>)</span>
</code></pre></div> <p>With everything set, the network now has support for a basic implementation of a lottery.</p> <div class=page-disclaimer> The information presented herein has been provided by third parties and is made available solely for general information purposes. Tanssi does not endorse any project listed and described on the Tanssi Doc Website (https://docs.tanssi.network/). Tanssi Foundation does not warrant the accuracy, completeness or usefulness of this information. Any reliance you place on such information is strictly at your own risk. Tanssi Foundation disclaims all liability and responsibility arising from any reliance placed on this information by you or by anyone who may be informed of any of its contents. All statements and/or opinions expressed in these materials are solely the responsibility of the person or entity providing those materials and do not necessarily represent the opinion of Tanssi Foundation. The information should not be construed as professional or financial advice of any kind. Advice from a suitably qualified professional should always be sought in relation to any particular matter or circumstance. The information herein may link to or integrate with other websites operated or content provided by third parties, and such other websites may link to this website. Tanssi Foundation has no control over any such other websites or their content and will have no liability arising out of or related to such websites or their content. The existence of any such link does not constitute an endorsement of such websites, the content of the websites, or the operators of the websites. These links are being provided to you only as a convenience and you release and hold Tanssi Foundation harmless from any and all liability arising from your use of this information or the information provided by any third-party website or service. </div> <div class=md-source-file> <small> <span class=source-file-label>Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 20, 2024</span> <br> <span class=source-file-seperator>|</span> <span class=source-file-label>Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 4, 2023</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=columns-llms-button> <button class="md-button primary copy-llms-btn" , title="Copy to clipboard"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"/></svg> llms-full.txt </button> </div> <div class=md-social> <a href=https://x.com/TanssiNetwork target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://t.me/tanssiofficial target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://discord.gg/tanssi target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://www.linkedin.com/company/tanssi target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/moondance-labs/tanssi target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.youtube.com/@TanssiNetwork target=_blank rel=noopener title=YouTube class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> <div class=md-copyright> <div class=md-copyright__highlight>  2025 Moondance Labs. All Rights Reserved. </div> <div class=network-links> <a href=https://www.tanssi.network/privacy-policy target=_blank>Privacy Policy</a> <a href=https://www.tanssi.network/terms-of-use target=_blank>Terms of Use</a> </div> </div> <div class=papermoon> <span>Made with  by <a href=https://papermoon.io/ target=_blank>PaperMoon</a></span> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "content.code.copy", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../../../js/externalLinkModal.min.js></script> <script src=../../../../js/fixCreatedDate.min.js></script> <script src=../../../../js/clipboardCopy.js></script> </body> </html>