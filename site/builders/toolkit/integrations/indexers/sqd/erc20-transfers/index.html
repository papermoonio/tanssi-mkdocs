<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to use the Squid SDK, a query node framework that can index both Substrate and EVM data, to process blockchain data for your Tanssi-powered network."><link href=https://docs.tanssi.network/builders/toolkit/integrations/indexers/sqd/erc20-transfers/ rel=canonical><link href=../quick-start/ rel=prev><link href=../../../oracles/ rel=next><link rel=icon href=/assets/images/tanssi-favicon.webp><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>Index ERC-20 Transfers on an EVM Network | Tanssi Docs</title><link rel=stylesheet href=../../../../../../assets/stylesheets/main.50c56a3b.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Epilogue:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=/assets/stylesheets/tanssi.min.css><link rel=stylesheet href=/assets/stylesheets/termynal.min.css><link rel=stylesheet href=/assets/stylesheets/timeline-neoteroi.css><script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-BT4KVVBH8F"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-BT4KVVBH8F",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-BT4KVVBH8F",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#indexing-erc-20-transfers-on-a-tanssi-evm-network class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=logo-container> <a href=https://docs.tanssi.network/ title="Tanssi Docs" class="md-header__button md-logo" aria-label="Tanssi Docs" data-md-component=logo> <img src=/assets/images/tanssi-logo-white.webp alt=logo> </a> </div> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../ >Builders</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../build/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/build.webp alt="Build Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Build Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../deploy/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/deploy.webp alt="Deploy Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Deploy Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../manage/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/manage.webp alt="Manage Your Network" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Manage Your Network</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/toolkit.webp alt="Network Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Toolkit</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../account-management/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/account-management.webp alt="Account Management" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Account Management</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tanssi-network/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi-network.webp alt="Network Essentials" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Essentials</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../../node-operators/ >Node Operators</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../../node-operators/network-node/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/network-node.webp alt="Run a Network Node" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Run a Network Node</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../../node-operators/sequencers/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/sequencers.webp alt=Sequencers loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Sequencers</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../../node-operators/validators/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/validators.webp alt=Validators loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Validators</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../../learn/ >Learn</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../../learn/tanssi/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi.webp alt="Introduction to Tanssi" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Introduction to Tanssi</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../../learn/framework/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/framework.webp alt="Network Development Framework" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Network Development Framework</span> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../../learn/decentralized-networks/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/decentralized-networks.webp alt="Tanssi-Powered Networks" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Tanssi-Powered Networks</span> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=https://www.tanssi.network/ >About</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=https://www.tanssi.network/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/about-tanssi.webp alt="About Tanssi" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>About Tanssi</span> </div> </a> </li> <li class=md-tab__item> <a href=https://apps.tanssi.network/dancebox> <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/tanssi-testnet.webp alt="Tanssi TestNet" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Tanssi TestNet</span> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class=md-header__buttons> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../.. title="Tanssi Docs" class="md-nav__button md-logo" aria-label="Tanssi Docs" data-md-component=logo> <img src=/assets/images/tanssi-logo-white.webp alt=logo> </a> Tanssi Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../ >Builders</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Builders </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../build/ >Build Your Network</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Build Your Network </label> <ul class="md-nav__list builders-build-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../build/templates/ >Network Templates</a> <label for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Network Templates </label> <ul class="md-nav__list builders-build-templates-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../build/templates/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../build/templates/substrate/ class=md-nav__link> Substrate </a> </li> <li class=md-nav__item> <a href=../../../../../build/templates/evm/ class=md-nav__link> EVM </a> </li> <li class=md-nav__item> <a href=../../../../../build/templates/custom-runtime/ class=md-nav__link> Custom Runtime </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../build/customize/ >Customize Your Network</a> <label for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Customize Your Network </label> <ul class="md-nav__list builders-build-customize-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../build/customize/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../../../build/customize/adding-built-in-module/ class=md-nav__link> Adding a Built-in Module </a> </li> <li class=md-nav__item> <a href=../../../../../build/customize/adding-custom-made-module/ class=md-nav__link> Adding a Custom-Made Module </a> </li> <li class=md-nav__item> <a href=../../../../../build/customize/adding-external-module/ class=md-nav__link> Adding an External Module </a> </li> <li class=md-nav__item> <a href=../../../../../build/customize/customizing-chain-specs/ class=md-nav__link> Chain Specifications </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../deploy/ >Deploy Your Network</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Deploy Your Network </label> <ul class="md-nav__list builders-deploy-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../deploy/dapp/ class=md-nav__link> Using the Tanssi DApp </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../manage/ >Manage Your Network</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Manage Your Network </label> <ul class="md-nav__list builders-manage-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../manage/dapp/ >Using the Tanssi dApp</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> Using the Tanssi dApp </label> <ul class="md-nav__list builders-manage-dapp-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../manage/dapp/services-payment/ class=md-nav__link> Block Production Services Payment </a> </li> <li class=md-nav__item> <a href=../../../../../manage/dapp/manage-tokens/ class=md-nav__link> Manage Tokens </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../manage/developer-portal/ >Using the Developer Portal</a> <label for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> Using the Developer Portal </label> <ul class="md-nav__list builders-manage-developer-portal-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/sudo/ class=md-nav__link> Manage the Sudo Account </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/upgrade/ class=md-nav__link> Dispatch Runtime Upgrades </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/maintenance/ class=md-nav__link> Enable Maintenance Mode </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/pause-transactions/ class=md-nav__link> Pause Transactions </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/impersonate/ class=md-nav__link> Impersonate Accounts </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/minting/ class=md-nav__link> Mint Tokens </a> </li> <li class=md-nav__item> <a href=../../../../../manage/developer-portal/smart-contracts-creation-filter/ class=md-nav__link> Smart EVM - Whitelist Contract Deployments </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ >Network Toolkit</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=true> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Network Toolkit </label> <ul class="md-nav__list builders-toolkit-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum-api/ >Ethereum Tools</a> <label for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> Ethereum Tools </label> <ul class="md-nav__list builders-toolkit-ethereum-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum-api/wallets/ >Wallets</a> <label for=__nav_2_5_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_2> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-ethereum-api-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum-api/wallets/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/wallets/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/wallets/subwallet/ class=md-nav__link> SubWallet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum-api/dev-env/ >Dev Environments</a> <label for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> Dev Environments </label> <ul class="md-nav__list builders-toolkit-ethereum-api-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum-api/dev-env/remix/ class=md-nav__link> Remix </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/dev-env/hardhat/ class=md-nav__link> Hardhat </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/dev-env/foundry/ class=md-nav__link> Foundry </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/dev-env/thirdweb/ class=md-nav__link> thirdweb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum-api/libraries/ >Libraries</a> <label for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class="md-nav__list builders-toolkit-ethereum-api-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum-api/libraries/ethersjs/ class=md-nav__link> Ethers.js </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/libraries/viem/ class=md-nav__link> viem </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/libraries/web3js/ class=md-nav__link> Web3.js </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/libraries/web3py/ class=md-nav__link> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum-api/precompiles/ >Precompiles</a> <label for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> Precompiles </label> <ul class="md-nav__list builders-toolkit-ethereum-api-precompiles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum-api/precompiles/batch/ class=md-nav__link> Batch </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/precompiles/call-permit/ class=md-nav__link> Call Permit </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/precompiles/erc20/ class=md-nav__link> Native Token ERC-20 </a> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/precompiles/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../ethereum-api/rpc/ class=md-nav__link> JSON-RPC Methods </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../substrate-api/ >Substrate Tools</a> <label for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> Substrate Tools </label> <ul class="md-nav__list builders-toolkit-substrate-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../substrate-api/dev-env/ >Dev Environments</a> <label for=__nav_2_5_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_2> <span class="md-nav__icon md-icon"></span> Dev Environments </label> <ul class="md-nav__list builders-toolkit-substrate-api-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../substrate-api/dev-env/chopsticks/ class=md-nav__link> Chopsticks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../substrate-api/libraries/ >Libraries</a> <label for=__nav_2_5_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_3> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class="md-nav__list builders-toolkit-substrate-api-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../substrate-api/libraries/polkadot-js-api/ class=md-nav__link> Polkadot.js API </a> </li> <li class=md-nav__item> <a href=../../../../substrate-api/libraries/sidecar-api/ class=md-nav__link> Sidecar API </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../substrate-api/wallets/ >Wallets</a> <label for=__nav_2_5_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3_4> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-substrate-api-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../substrate-api/wallets/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../../substrate-api/wallets/subwallet/ class=md-nav__link> SubWallet </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../ >Integrations</a> <label for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_4_label aria-expanded=true> <label class=md-nav__title for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class="md-nav__list builders-toolkit-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Indexers</a> <label for=__nav_2_5_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_5_4_2> <span class="md-nav__icon md-icon"></span> Indexers </label> <ul class="md-nav__list builders-toolkit-integrations-indexers-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_2_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >SQD</a> <label for=__nav_2_5_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_4_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_5_4_2_2> <span class="md-nav__icon md-icon"></span> SQD </label> <ul class="md-nav__list builders-toolkit-integrations-indexers-sqd-" data-md-scrollfix> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Index ERC-20 Transfers <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Index ERC-20 Transfers </a> <nav class="md-nav md-nav--secondary" aria-label=Sections> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#check-prerequisites class=md-nav__link> <span class=md-ellipsis> Check Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#deploy-an-erc20-with-hardhat class=md-nav__link> <span class=md-ellipsis> Deploy an ERC-20 with Hardhat </span> </a> <nav class=md-nav aria-label="Deploy an ERC-20 with Hardhat"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-erc-20-contract class=md-nav__link> <span class=md-ellipsis> Create an ERC-20 Contract </span> </a> </li> <li class=md-nav__item> <a href=#deploy-erc-20-contract class=md-nav__link> <span class=md-ellipsis> Deploy an ERC-20 Contract </span> </a> </li> <li class=md-nav__item> <a href=#transfer-erc-20s class=md-nav__link> <span class=md-ellipsis> Transfer ERC-20s </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-a-squid-project class=md-nav__link> <span class=md-ellipsis> Create a Squid Project </span> </a> </li> <li class=md-nav__item> <a href=#set-up-the-indexer-for-erc-20-transfers class=md-nav__link> <span class=md-ellipsis> Set Up the Indexer for ERC-20 Transfers </span> </a> <nav class=md-nav aria-label="Set Up the Indexer for ERC-20 Transfers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-the-processor class=md-nav__link> <span class=md-ellipsis> Configure the Processor </span> </a> </li> <li class=md-nav__item> <a href=#transform-and-save-the-data class=md-nav__link> <span class=md-ellipsis> Transform and Save the Data </span> </a> </li> <li class=md-nav__item> <a href=#run-the-indexer class=md-nav__link> <span class=md-ellipsis> Run the Indexer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#query-your-squid class=md-nav__link> <span class=md-ellipsis> Query Your Squid </span> </a> </li> <li class=md-nav__item> <a href=#debug-your-squid class=md-nav__link> <span class=md-ellipsis> Debug Your Squid </span> </a> <nav class=md-nav aria-label="Debug Your Squid"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-errors class=md-nav__link> <span class=md-ellipsis> Common Errors </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../oracles/ >Oracles</a> <label for=__nav_2_5_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_3> <span class="md-nav__icon md-icon"></span> Oracles </label> <ul class="md-nav__list builders-toolkit-integrations-oracles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../oracles/acurast/ class=md-nav__link> Price Feeds with Acurast </a> </li> <li class=md-nav__item> <a href=../../../oracles/band/ class=md-nav__link> Price Feeds with Band Protocol </a> </li> <li class=md-nav__item> <a href=../../../oracles/phala/ class=md-nav__link> Price Feeds with Phala </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../wallet-integrations/ >Wallets</a> <label for=__nav_2_5_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_4_4> <span class="md-nav__icon md-icon"></span> Wallets </label> <ul class="md-nav__list builders-toolkit-integrations-wallet-integrations-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../wallet-integrations/rainbowkit/ class=md-nav__link> Rainbowkit </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../account-management/ >Account Management</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Account Management </label> <ul class="md-nav__list builders-account-management-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../account-management/proxy-accounts/ class=md-nav__link> Proxy Accounts </a> </li> <li class=md-nav__item> <a href=../../../../../account-management/identity/ class=md-nav__link> On-Chain Identities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tanssi-network/ >Network Essentials</a> <label for=__nav_2_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Network Essentials </label> <ul class="md-nav__list builders-tanssi-network-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tanssi-network/testnet/ >TestNet</a> <label for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> TestNet </label> <ul class="md-nav__list builders-tanssi-network-testnet-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tanssi-network/testnet/dancebox/ class=md-nav__link> Dancebox </a> </li> <li class=md-nav__item> <a href=../../../../../tanssi-network/testnet/demo-evm-network/ class=md-nav__link> Demo EVM Network </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../tanssi-network/endpoints/ class=md-nav__link> Network Endpoints </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/ >Node Operators</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Node Operators </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/network-node/ >Run a Network Node</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Run a Network Node </label> <ul class="md-nav__list node-operators-network-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/network-node/rpc-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/network-node/rpc-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/ >Sequencers</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Sequencers </label> <ul class="md-nav__list node-operators-sequencers-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/onboarding/ >Onboarding</a> <label for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Onboarding </label> <ul class="md-nav__list node-operators-sequencers-onboarding-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/onboarding/run-a-sequencer/ >Run a Sequencer</a> <label for=__nav_3_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_2> <span class="md-nav__icon md-icon"></span> Run a Sequencer </label> <ul class="md-nav__list node-operators-sequencers-onboarding-run-a-sequencer-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/onboarding/run-a-sequencer/sequencers-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/onboarding/run-a-sequencer/sequencers-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/onboarding/account-setup/ class=md-nav__link> Set Up Your Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/operational-tasks/ >Operational Tasks</a> <label for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> Operational Tasks </label> <ul class="md-nav__list node-operators-sequencers-operational-tasks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/ >Upgrade Your Node</a> <label for=__nav_3_3_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_3_2> <span class="md-nav__icon md-icon"></span> Upgrade Your Node </label> <ul class="md-nav__list node-operators-sequencers-operational-tasks-upgrade-your-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/upgrade-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/operational-tasks/upgrade-your-node/upgrade-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/operational-tasks/proxy-accounts/ class=md-nav__link> Use a Proxy Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/sequencers/offboarding/ >Offboarding</a> <label for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> Offboarding </label> <ul class="md-nav__list node-operators-sequencers-offboarding-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/sequencers/offboarding/account/ class=md-nav__link> Decommission Your Account </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/validators/ >Validators</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Validators </label> <ul class="md-nav__list node-operators-validators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/validators/onboarding/ >Onboarding</a> <label for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> Onboarding </label> <ul class="md-nav__list node-operators-validators-onboarding-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/validators/onboarding/run-a-validator/ >Run a Validator</a> <label for=__nav_3_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2_2> <span class="md-nav__icon md-icon"></span> Run a Validator </label> <ul class="md-nav__list node-operators-validators-onboarding-run-a-validator-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/onboarding/run-a-validator/validators-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/onboarding/run-a-validator/validators-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/onboarding/register-in-symbiotic/ class=md-nav__link> Register in Symbiotic </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/onboarding/opt-in-to-tanssi/ class=md-nav__link> Opt In to Tanssi </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/onboarding/account-setup/ class=md-nav__link> Set Up Your Account </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/validators/operational-tasks/ >Operational Tasks</a> <label for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> Operational Tasks </label> <ul class="md-nav__list node-operators-validators-operational-tasks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../node-operators/validators/operational-tasks/upgrade-your-node/ >Upgrade Your Node</a> <label for=__nav_3_4_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3_2> <span class="md-nav__icon md-icon"></span> Upgrade Your Node </label> <ul class="md-nav__list node-operators-validators-operational-tasks-upgrade-your-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/operational-tasks/upgrade-your-node/upgrade-docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/operational-tasks/upgrade-your-node/upgrade-systemd/ class=md-nav__link> Using Systemd </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../../node-operators/validators/operational-tasks/proxy-accounts/ class=md-nav__link> Set Up a Proxy Account </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/ >Learn</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Learn </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/tanssi/ >Introduction to Tanssi</a> <label for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Introduction to Tanssi </label> <ul class="md-nav__list learn-tanssi-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/tanssi/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/tanssi/network-services/ >Network Services</a> <label for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Network Services </label> <ul class="md-nav__list learn-tanssi-network-services-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/tanssi/network-services/block-production/ class=md-nav__link> Block Production </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/tanssi/external-security-providers/ >External Security Providers</a> <label for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> External Security Providers </label> <ul class="md-nav__list learn-tanssi-external-security-providers-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/tanssi/external-security-providers/symbiotic/ class=md-nav__link> Ethereum with Symbiotic </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/tanssi/network-features/ >Network Features</a> <label for=__nav_4_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_5> <span class="md-nav__icon md-icon"></span> Network Features </label> <ul class="md-nav__list learn-tanssi-network-features-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/tanssi/network-features/staking/ class=md-nav__link> Staking for Block Production </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/framework/ >Network Development Framework</a> <label for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Network Development Framework </label> <ul class="md-nav__list learn-framework-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/framework/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../../learn/framework/architecture/ class=md-nav__link> Framework Architecture </a> </li> <li class=md-nav__item> <a href=../../../../../../learn/framework/modules/ class=md-nav__link> Modularity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../../learn/decentralized-networks/ >Tanssi-Powered Networks</a> <label for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Tanssi-Powered Networks </label> <ul class="md-nav__list learn-decentralized-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../learn/decentralized-networks/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../../learn/decentralized-networks/included-templates/ class=md-nav__link> Included Templates </a> </li> <li class=md-nav__item> <a href=../../../../../../learn/decentralized-networks/runtime-features/ class=md-nav__link> Core Runtime Features </a> </li> <li class=md-nav__item> <a href=../../../../../../learn/decentralized-networks/tx-fees/ class=md-nav__link> Transaction Fees </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://www.tanssi.network/ class=md-nav__link> About Tanssi </a> </li> <li class=md-nav__item> <a href=https://apps.tanssi.network/dancebox class=md-nav__link> Tanssi TestNet </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Sections> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#check-prerequisites class=md-nav__link> <span class=md-ellipsis> Check Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#deploy-an-erc20-with-hardhat class=md-nav__link> <span class=md-ellipsis> Deploy an ERC-20 with Hardhat </span> </a> <nav class=md-nav aria-label="Deploy an ERC-20 with Hardhat"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-erc-20-contract class=md-nav__link> <span class=md-ellipsis> Create an ERC-20 Contract </span> </a> </li> <li class=md-nav__item> <a href=#deploy-erc-20-contract class=md-nav__link> <span class=md-ellipsis> Deploy an ERC-20 Contract </span> </a> </li> <li class=md-nav__item> <a href=#transfer-erc-20s class=md-nav__link> <span class=md-ellipsis> Transfer ERC-20s </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-a-squid-project class=md-nav__link> <span class=md-ellipsis> Create a Squid Project </span> </a> </li> <li class=md-nav__item> <a href=#set-up-the-indexer-for-erc-20-transfers class=md-nav__link> <span class=md-ellipsis> Set Up the Indexer for ERC-20 Transfers </span> </a> <nav class=md-nav aria-label="Set Up the Indexer for ERC-20 Transfers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-the-processor class=md-nav__link> <span class=md-ellipsis> Configure the Processor </span> </a> </li> <li class=md-nav__item> <a href=#transform-and-save-the-data class=md-nav__link> <span class=md-ellipsis> Transform and Save the Data </span> </a> </li> <li class=md-nav__item> <a href=#run-the-indexer class=md-nav__link> <span class=md-ellipsis> Run the Indexer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#query-your-squid class=md-nav__link> <span class=md-ellipsis> Query Your Squid </span> </a> </li> <li class=md-nav__item> <a href=#debug-your-squid class=md-nav__link> <span class=md-ellipsis> Debug Your Squid </span> </a> <nav class=md-nav aria-label="Debug Your Squid"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-errors class=md-nav__link> <span class=md-ellipsis> Common Errors </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div><div class=feedback-actions-container><div class=feedback-section> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moondance-labs/tanssi-docs/issues/new/?title=[Feedback]+Index%20ERC-20%20Transfers%20on%20an%20EVM%20Network+-+/builders/toolkit/integrations/indexers/sqd/erc20-transfers/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> <div class=divider></div></form> </div><div class=edit-section> <a href=https://github.com/moondance-labs/tanssi-docs/edit/main/builders/toolkit/integrations/indexers/sqd/erc20-transfers.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg> Edit this page </a> </div> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset "> <h1 id=indexing-erc-20-transfers-on-a-tanssi-evm-network>Indexing ERC-20 Transfers on a Tanssi EVM Network<a class=headerlink href=#indexing-erc-20-transfers-on-a-tanssi-evm-network title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p><a href=https://www.sqd.dev/ target=_blank>SQD</a> is a data network that allows rapid and cost-efficient retrieval of blockchain data from 100+ chains using SQDs decentralized data lake and open-source SDK. In very simple terms, SQD can be thought of as an ETL (extract, transform, and load) tool with a <a href=https://graphql.org target=_blank>GraphQL</a> server included. It enables comprehensive filtering, pagination, and even full-text search capabilities.</p> <p>SQD has native and full support for both EVM and Substrate data. SQD offers a Substrate Archive and Processor and an EVM Archive and Processor. The Substrate Archive and Processor can be used to index both Substrate and EVM data. This allows developers to extract on-chain data from any Tanssi-powered network and process EVM logs as well as Substrate entities (events, extrinsics, and storage items) in one single project and serve the resulting data with one single GraphQL endpoint. If you exclusively want to index EVM data, it is recommended to use the EVM Archive and Processor.</p> <p>This tutorial is a step-by-step guide to building a Squid to index EVM data from start to finish. It's recommended that you follow along, taking each step described on your own, but you can also find a <a href=https://github.com/themacexpert/tanssiSquid target=_blank>complete version of the Squid built in this tutorial in the tanssiSquid GitHub repository</a>.</p> <h2 id=check-prerequisites>Check Prerequisites<a class=headerlink href=#check-prerequisites title="Permanent link">&para;</a></h2> <p>To follow along with this tutorial, you'll need to have:</p> <ul> <li><a href=https://docs.docker.com/get-docker target=_blank>Docker installed</a></li> <li><a href=https://docs.docker.com/compose/install target=_blank>Docker Compose installed</a></li> <li>An empty Hardhat project. For step-by-step instructions, please refer to the <a href=/builders/toolkit/ethereum-api/dev-env/hardhat/#creating-a-hardhat-project target=_blank>Creating a Hardhat Project</a> section of our Hardhat documentation page</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The examples in this guide are based on a MacOS or Ubuntu 20.04 environment. If you're using Windows, you'll need to adapt them accordingly.</p> <p>Furthermore, please ensure that you have Node.js and a package manager (such as npm or yarn) installed. To learn how to install Node.js, please check their <a href=https://nodejs.org/en/download target=\blank>official documentation</a>.</p> <p>Also, make sure you've initialized a <code>package.json</code> file for ES6 modules. You can initialize a default <code>package.json</code> file using npm by running the following command <code>npm init --yes</code>.</p> </div> <h2 id=deploy-an-erc20-with-hardhat>Deploy an ERC-20 with Hardhat<a class=headerlink href=#deploy-an-erc20-with-hardhat title="Permanent link">&para;</a></h2> <p>Before we can index anything with SQD we need to make sure we have something to index! This section will walk through deploying an ERC-20 token to your Tanssi-powered network so you can get started indexing it. However, you can feel free to skip to <a href=#create-a-squid-project>Create a Squid Project</a> if either of the two scenarios apply:</p> <ul> <li>You have already deployed an ERC-20 token to your network (and made several transfers)</li> <li>You would prefer to use an existing ERC-20 token deployed to the demo EVM network (of which there are already several transfer events)</li> </ul> <p>If you'd like to use an existing ERC-20 token on the demo EVM network, you can use the below <code>MyTok.sol</code> contract. The hashes of the token transfers are provided as well to assist with any debugging.</p> <p>In this section, we'll show you how to deploy an ERC-20 to your EVM network and we'll write a quick script to fire off a series of transfers that will be picked up by our SQD indexer. Ensure that you have initialized an empty Hardhat project via the instructions in the <a href=/builders/toolkit/ethereum-api/dev-env/hardhat/#creating-a-hardhat-project target=_blank>Creating a Hardhat Project</a> section of our Hardhat documentation page.</p> <p>Before we dive into creating our project, let's install a couple of dependencies that we'll need: the <a href=https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-ethers target=_blank>Hardhat Ethers plugin</a> and <a href=https://docs.openzeppelin.com/contracts/4.x target=_blank>OpenZeppelin contracts</a>. The Hardhat Ethers plugin provides a convenient way to use the <a href=/builders/toolkit/ethereum-api/libraries/ethersjs/ target=_blank>Ethers</a> library to interact with the network. We'll use OpenZeppelin's base ERC-20 implementation to create an ERC-20. To install both of these dependencies, you can run:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>npm</label><label for=__tabbed_1_2>yarn</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>npm<span class=w> </span>install<span class=w> </span>@nomicfoundation/hardhat-ethers<span class=w> </span>ethers<span class=w> </span>@openzeppelin/contracts
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code>yarn<span class=w> </span>add<span class=w> </span>@nomicfoundation/hardhat-ethers<span class=w> </span>ethers<span class=w> </span>@openzeppelin/contracts
</code></pre></div> </div> </div> </div> <p>Now we can edit <code>hardhat.config.js</code> to include the following network and account configurations for our network. You can replace the demo EVM network values with the respective parameters for your own Tanssi-powered EVM network which can be found at <a href=https://apps.tanssi.network target=_blank>apps.tanssi.network</a>.</p> <details class=code open=open> <summary>hardhat.config.js</summary> <div class=highlight><pre><span></span><code><span class=c1>// 1. Import the Ethers plugin required to interact with the contract</span>
<span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@nomicfoundation/hardhat-ethers&#39;</span><span class=p>);</span>

<span class=c1>// 2. Add your private key that is funded with tokens of your Tanssi-powered network</span>
<span class=c1>// This is for example purposes only - **never store your private keys in a JavaScript file**</span>
<span class=kd>const</span><span class=w> </span><span class=nx>privateKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>

<span class=cm>/** @type import(&#39;hardhat/config&#39;).HardhatUserConfig */</span>
<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// 3. Specify the Solidity version</span>
<span class=w>  </span><span class=nx>solidity</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;0.8.20&#39;</span><span class=p>,</span>
<span class=w>  </span><span class=nx>networks</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// 4. Add the network specification for your Tanssi EVM network</span>
<span class=w>    </span><span class=nx>demo</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>url</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;https://dancebox-3001.tanssi-api.network/&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>chainId</span><span class=o>:</span><span class=w> </span><span class=mf>5678</span><span class=p>,</span><span class=w> </span><span class=c1>// Fill in the EVM ChainID for your Tanssi-powered network</span>
<span class=w>      </span><span class=nx>accounts</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=nx>privateKey</span><span class=p>],</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>  </span><span class=p>},</span>
<span class=p>};</span>
</code></pre></div> </details> <div class="admonition remember"> <p class=admonition-title>Remember</p> <p>You should never store your private keys in a JavaScript or Python file. It is done in this tutorial for ease of demonstration only. You should always manage your private keys with a designated secret manager or similar service.</p> </div> <h3 id=create-an-erc-20-contract>Create an ERC-20 Contract<a class=headerlink href=#create-an-erc-20-contract title="Permanent link">&para;</a></h3> <p>For the purposes of this tutorial, we'll be creating a simple ERC-20 contract. We'll rely on OpenZeppelin's ERC-20 base implementation. We'll start by creating a file for the contract and naming it <code>MyTok.sol</code>:</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>-p<span class=w> </span>contracts<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>touch<span class=w> </span>contracts/MyTok.sol
</code></pre></div> <p>Now we can edit the <code>MyTok.sol</code> file to include the following contract, which will mint an initial supply of MYTOKs and allow only the owner of the contract to mint additional tokens:</p> <details class=code open=open> <summary>MyTok.sol</summary> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.20</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/access/Ownable.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>MyTok</span><span class=w> </span><span class=kt>is</span><span class=w> </span>ERC20<span class=p>,</span><span class=w> </span>Ownable<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>()</span><span class=w> </span>ERC20<span class=p>(</span><span class=s2>&quot;MyToken&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;MTK&quot;</span><span class=p>)</span><span class=w> </span>Ownable<span class=p>(</span><span class=k>msg.sender</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>_mint<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">50000</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class="m m-Decimal">10</span><span class=w> </span><span class=o>**</span><span class=w> </span>decimals<span class=p>());</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>mint</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=nv>to</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>onlyOwner<span class=w> </span><span class=p>{</span>
<span class=w>        </span>_mint<span class=p>(</span>to<span class=p>,</span><span class=w> </span>amount<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </details> <h3 id=deploy-erc-20-contract>Deploy an ERC-20 Contract<a class=headerlink href=#deploy-erc-20-contract title="Permanent link">&para;</a></h3> <p>Now that we have our contract set up, we can compile and deploy our contract.</p> <p>To compile the contract, you can run:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>compile
</code></pre></div> <p><img alt="Compile contracts using Hardhat" src=/images/builders/toolkit/integrations/indexers/sqd/erc20-transfers/sqd-1.webp></p> <p>This command will compile our contract and generate an <code>artifacts</code> directory containing the ABI of the contract.</p> <p>To deploy our contract, we'll need to create a deployment script that deploys our ERC-20 contract and mints an initial supply of MYTOKs. We'll use Alith's account to deploy the contract, and we'll specify the initial supply to be 1000 MYTOK. The initial supply will be minted and sent to the contract owner, which is Alith.</p> <p>Let's take the following steps to deploy our contract:</p> <ol> <li> <p>Create a directory and file for our script:</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>-p<span class=w> </span>scripts<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>touch<span class=w> </span>scripts/deploy.js
</code></pre></div> </li> <li> <p>In the <code>deploy.js</code> file, go ahead and add the following script:</p> <details class=code open=open> <summary>deploy.js</summary> <div class=highlight><pre><span></span><code><span class=c1>// scripts/deploy.js</span>
<span class=kd>const</span><span class=w> </span><span class=nx>hre</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;hardhat&#39;</span><span class=p>);</span>
<span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@nomicfoundation/hardhat-ethers&#39;</span><span class=p>);</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Get ERC-20 contract</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>MyTok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>hre</span><span class=p>.</span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractFactory</span><span class=p>(</span><span class=s1>&#39;MyTok&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Define custom gas price and gas limit</span>
<span class=w>  </span><span class=c1>// This is a temporary stopgap solution to a bug</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>customGasPrice</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>50000000000</span><span class=p>;</span><span class=w> </span><span class=c1>// example for 50 gwei</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>customGasLimit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5000000</span><span class=p>;</span><span class=w> </span><span class=c1>// example gas limit</span>

<span class=w>  </span><span class=c1>// Deploy the contract providing a gas price and gas limit</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>myTok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>MyTok</span><span class=p>.</span><span class=nx>deploy</span><span class=p>({</span>
<span class=w>    </span><span class=nx>gasPrice</span><span class=o>:</span><span class=w> </span><span class=kt>customGasPrice</span><span class=p>,</span>
<span class=w>    </span><span class=nx>gasLimit</span><span class=o>:</span><span class=w> </span><span class=kt>customGasLimit</span><span class=p>,</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Wait for the deployment</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>myTok</span><span class=p>.</span><span class=nx>waitForDeployment</span><span class=p>();</span>

<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Contract deployed to </span><span class=si>${</span><span class=nx>myTok</span><span class=p>.</span><span class=nx>target</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>}</span>

<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exitCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=p>});</span>
</code></pre></div> </details> </li> <li> <p>Run the script using the <code>dev</code> network configurations we set up in the <code>hardhat.config.js</code> file:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>run<span class=w> </span>scripts/deploy.js<span class=w> </span>--network<span class=w> </span>demo
</code></pre></div> </li> </ol> <p>The address of the deployed contract should be printed to the terminal. Save the address, as we'll need it to interact with the contract in the following section.</p> <h3 id=transfer-erc-20s>Transfer ERC-20s<a class=headerlink href=#transfer-erc-20s title="Permanent link">&para;</a></h3> <p>Since we'll be indexing <code>Transfer</code> events for our ERC-20, we'll need to send a few transactions that transfer some tokens from Alith's account to our other test accounts. We'll do this by creating a simple script that transfers 10 MYTOKs to Baltathar, Charleth, Dorothy, and Ethan. We'll take the following steps:</p> <p>Create a new file script to send transactions:</p> <div class=highlight><pre><span></span><code>touch<span class=w> </span>scripts/transactions.js
</code></pre></div> <p>In the <code>transactions.js</code> file, add the following script and insert the contract address of your deployed MyTok contract (output in the console in the prior step):</p> <details class=code open=open> <summary>transactions.js</summary> <div class=highlight><pre><span></span><code><span class=c1>// We require the Hardhat Runtime Environment explicitly here. This is optional</span>
<span class=c1>// but useful for running the script in a standalone fashion through `node &lt;script&gt;`.</span>
<span class=c1>//</span>
<span class=c1>// You can also run a script with `npx hardhat run &lt;script&gt;`. If you do that, Hardhat</span>
<span class=c1>// will compile your contracts, add the Hardhat Runtime Environment&#39;s members to the</span>
<span class=c1>// global scope, and execute the script.</span>
<span class=kd>const</span><span class=w> </span><span class=nx>hre</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;hardhat&#39;</span><span class=p>);</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Get Contract ABI</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>MyTok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>hre</span><span class=p>.</span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractFactory</span><span class=p>(</span><span class=s1>&#39;MyTok&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Define custom gas price and gas limit</span>
<span class=w>  </span><span class=c1>// Gas price is typically specified in &#39;wei&#39; and gas limit is just a number</span>
<span class=w>  </span><span class=c1>// You can use Ethers.js utility functions to convert from gwei or ether if needed</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>customGasPrice</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>50000000000</span><span class=p>;</span><span class=w> </span><span class=c1>// example for 50 gwei</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>customGasLimit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5000000</span><span class=p>;</span><span class=w> </span><span class=c1>// example gas limit</span>

<span class=w>  </span><span class=c1>// Plug ABI to address</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>myTok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>MyTok</span><span class=p>.</span><span class=nx>attach</span><span class=p>(</span><span class=s1>&#39;INSERT_CONTRACT_ADDRESS&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100000000000000000n</span><span class=p>;</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>tx</span><span class=p>;</span>
<span class=w>  </span><span class=c1>// Transfer to Baltathar</span>
<span class=w>  </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>myTok</span><span class=p>.</span><span class=nx>transfer</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;0x3Cd0A705a2DC65e5b1E1205896BaA2be8A07c6e0&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>value</span><span class=p>,</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>      </span><span class=nx>gasPrice</span><span class=o>:</span><span class=w> </span><span class=kt>customGasPrice</span><span class=p>,</span>
<span class=w>      </span><span class=nx>gasLimit</span><span class=o>:</span><span class=w> </span><span class=kt>customGasLimit</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transfer to Baltathar with TxHash </span><span class=si>${</span><span class=nx>tx</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Transfer to Charleth</span>
<span class=w>  </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>myTok</span><span class=p>.</span><span class=nx>transfer</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;0x798d4Ba9baf0064Ec19eB4F0a1a45785ae9D6DFc&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>value</span><span class=p>,</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>      </span><span class=nx>gasPrice</span><span class=o>:</span><span class=w> </span><span class=kt>customGasPrice</span><span class=p>,</span>
<span class=w>      </span><span class=nx>gasLimit</span><span class=o>:</span><span class=w> </span><span class=kt>customGasLimit</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transfer to Charleth with TxHash </span><span class=si>${</span><span class=nx>tx</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Transfer to Dorothy</span>
<span class=w>  </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>myTok</span><span class=p>.</span><span class=nx>transfer</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;0x773539d4Ac0e786233D90A233654ccEE26a613D9&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>value</span><span class=p>,</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>      </span><span class=nx>gasPrice</span><span class=o>:</span><span class=w> </span><span class=kt>customGasPrice</span><span class=p>,</span>
<span class=w>      </span><span class=nx>gasLimit</span><span class=o>:</span><span class=w> </span><span class=kt>customGasLimit</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transfer to Dorothy with TxHash </span><span class=si>${</span><span class=nx>tx</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Transfer to Ethan</span>
<span class=w>  </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>myTok</span><span class=p>.</span><span class=nx>transfer</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;0xFf64d3F6efE2317EE2807d223a0Bdc4c0c49dfDB&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>value</span><span class=p>,</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>      </span><span class=nx>gasPrice</span><span class=o>:</span><span class=w> </span><span class=kt>customGasPrice</span><span class=p>,</span>
<span class=w>      </span><span class=nx>gasLimit</span><span class=o>:</span><span class=w> </span><span class=kt>customGasLimit</span><span class=p>,</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transfer to Ethan with TxHash </span><span class=si>${</span><span class=nx>tx</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>}</span>

<span class=c1>// We recommend this pattern to be able to use async/await everywhere</span>
<span class=c1>// and properly handle errors.</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exitCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=p>});</span>
</code></pre></div> </details> <p>Run the script to send the transactions:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>run<span class=w> </span>scripts/transactions.js<span class=w> </span>--network<span class=w> </span>demo
</code></pre></div> <p>As each transaction is sent, you'll see a log printed to the terminal.</p> <p><img alt="Send transactions using Hardhat" src=/images/builders/toolkit/integrations/indexers/sqd/erc20-transfers/sqd-2.webp></p> <p>Now we can move on to creating our Squid to index the data on our local development node.</p> <h2 id=create-a-squid-project>Create a Squid Project<a class=headerlink href=#create-a-squid-project title="Permanent link">&para;</a></h2> <p>Now we're going to create our Subquid project. First, we'll need to install the <a href=https://docs.sqd.dev/squid-cli/ target=_blank>Squid CLI</a>:</p> <div class=highlight><pre><span></span><code>npm<span class=w> </span>i<span class=w> </span>-g<span class=w> </span>@subsquid/cli@latest
</code></pre></div> <p>To verify successful installation, you can run:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>--version
</code></pre></div> <p>Now we'll be able to use the <code>sqd</code> command to interact with our Squid project. To create our project, we're going to use the <code>--template</code> (<code>-t</code>) flag, which will create a project from a template. We'll be using the EVM Squid template, which is a starter project for indexing EVM chains.</p> <p>You can run the following command to create an EVM Squid named <code>tanssi-squid</code>:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>init<span class=w> </span>tanssi-squid<span class=w> </span>--template<span class=w> </span>evm
</code></pre></div> <p>This will create a Squid with all of the necessary dependencies. You can go ahead and install the dependencies:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>tanssi-squid<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>ci
</code></pre></div> <p>Now that we have a starting point for our project, we'll need to configure our project to index ERC-20 <code>Transfer</code> events taking place on our Tanssi network.</p> <h2 id=set-up-the-indexer-for-erc-20-transfers>Set Up the Indexer for ERC-20 Transfers<a class=headerlink href=#set-up-the-indexer-for-erc-20-transfers title="Permanent link">&para;</a></h2> <p>In order to index ERC-20 transfers, we'll need to take a series of actions:</p> <ol> <li>Define the database schema and generate the entity classes</li> <li>Use the <code>ERC20</code> contract's ABI to generate TypeScript interface classes</li> <li>Configure the processor by specifying exactly what data to ingest</li> <li>Transform the data and insert it into a TypeORM database in <code>main.ts</code></li> <li>Run the indexer and query the squid</li> </ol> <p>As mentioned, we'll first need to define the database schema for the transfer data. To do so, we'll edit the <code>schema.graphql</code> file, which is located in the root directory, and create a <code>Transfer</code> entity and <code>Account</code> entity. You can copy and paste the below schema, ensuring that any existing schema is first removed.</p> <details class=code open=open> <summary>schema.graphql</summary> <div class=highlight><pre><span></span><code><span class=k>type</span><span class=w> </span><span class=err>Account</span><span class=w> </span><span class=err>@entity</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=err>&quot;</span><span class=n>Account</span><span class=w> </span><span class=n>address</span><span class=err>&quot;</span>
<span class=w>  </span><span class=nl>id</span><span class=p>:</span><span class=w> </span><span class=n>ID</span><span class=err>!</span>
<span class=w>  </span><span class=nl>transfersFrom</span><span class=p>:</span><span class=w> </span><span class=err>[</span><span class=n>Transfer</span><span class=err>!]</span><span class=w> </span><span class=nd>@derivedFrom</span><span class=p>(</span><span class=n>field</span><span class=p>:</span><span class=w> </span><span class=s>&quot;from&quot;</span><span class=p>)</span>
<span class=w>  </span><span class=nl>transfersTo</span><span class=p>:</span><span class=w> </span><span class=err>[</span><span class=n>Transfer</span><span class=err>!]</span><span class=w> </span><span class=nd>@derivedFrom</span><span class=p>(</span><span class=n>field</span><span class=p>:</span><span class=w> </span><span class=s>&quot;to&quot;</span><span class=p>)</span>
<span class=p>}</span>

<span class=k>type</span><span class=w> </span><span class=err>Transfer</span><span class=w> </span><span class=err>@entity</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nl>id</span><span class=p>:</span><span class=w> </span><span class=n>ID</span><span class=err>!</span>
<span class=w>  </span><span class=nl>blockNumber</span><span class=p>:</span><span class=w> </span><span class=n>Int</span><span class=err>!</span>
<span class=w>  </span><span class=nl>timestamp</span><span class=p>:</span><span class=w> </span><span class=n>DateTime</span><span class=err>!</span>
<span class=w>  </span><span class=nl>txHash</span><span class=p>:</span><span class=w> </span><span class=n>String</span><span class=err>!</span>
<span class=w>  </span><span class=nl>from</span><span class=p>:</span><span class=w> </span><span class=n>Account</span><span class=err>!</span>
<span class=w>  </span><span class=nl>to</span><span class=p>:</span><span class=w> </span><span class=n>Account</span><span class=err>!</span>
<span class=w>  </span><span class=nl>amount</span><span class=p>:</span><span class=w> </span><span class=n>BigInt</span><span class=err>!</span>
<span class=p>}</span>
</code></pre></div> </details> <p>Now we can generate the entity classes from the schema, which we'll use when we process the transfer data. This will create new classes for each entity in the <code>src/model/generated</code> directory.</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>codegen
</code></pre></div> <p>In the next step, we'll use the ERC-20 ABI to automatically generate TypeScript interface classes. Below is a generic ERC-20 standard ABI. Copy and paste it into a file named <code>erc20.json</code> in the <code>abi</code> folder at the root level of the project.</p> <details class=code> <summary>ERC-20 ABI</summary> <div class=highlight><pre><span></span><code><span class=p>[</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;name&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_spender&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;approve&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;bool&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;nonpayable&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;totalSupply&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_from&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_to&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;transferFrom&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;bool&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;nonpayable&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;decimals&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint8&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_owner&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;balanceOf&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;balance&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;symbol&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_to&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;transfer&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;bool&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;nonpayable&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;constant&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_owner&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;_spender&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;allowance&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;outputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;view&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;function&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;payable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;stateMutability&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;payable&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fallback&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;anonymous&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;owner&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;spender&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Approval&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;event&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;anonymous&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;from&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;to&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;address&quot;</span>
<span class=w>      </span><span class=p>},</span>
<span class=w>      </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;indexed&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;uint256&quot;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Transfer&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;event&quot;</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>]</span>
</code></pre></div> </details> <p>Next, we can use our contract's ABI to generate TypeScript interface classes. We can do this by running:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>typegen
</code></pre></div> <p><img alt="Run Squid commands" src=/images/builders/toolkit/integrations/indexers/sqd/erc20-transfers/sqd-3.webp></p> <p>This will generate the related TypeScript interface classes in the <code>src/abi/erc20.ts</code> file. For this tutorial, we'll be accessing the <code>events</code> specifically.</p> <h3 id=configure-the-processor>Configure the Processor<a class=headerlink href=#configure-the-processor title="Permanent link">&para;</a></h3> <p>The <code>processor.ts</code> file tells SQD exactly what data you'd like to ingest. Transforming that data into the exact desired format will take place at a later step. In <code>processor.ts</code>, we'll need to indicate a data source, a contract address, the event(s) to index, and a block range.</p> <p>Open up the <code>src</code> folder and head to the <code>processor.ts</code> file. First, we need to tell the SQD processor which contract we're interested in. Create a constant for the address in the following manner:</p> <div class=highlight><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>CONTRACT_ADDRESS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_CONTRACT_ADDRESS&#39;</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
</code></pre></div> <p>The <code>.toLowerCase()</code> is critical because the SQD processor is case-sensitive, and some block explorers format contract addresses with capitalization. Next, you'll see the line <code>export const processor = new EvmBatchProcessor()</code>, followed by <code>.setDataSource</code>. We'll need to make a few changes here. SQD has <a href=https://docs.sqd.dev/subsquid-network/reference/networks/ target=_blank>available archives for many chains</a> that can speed up the data retrieval process, but it's unlikely your network has a hosted archive already. But not to worry, SQD can easily get the data it needs via your network's RPC URL. Go ahead and comment out or delete the archive line. Once done, your code should look similar to the below:</p> <div class=highlight><pre><span></span><code><span class=p>.</span><span class=nx>setDataSource</span><span class=p>({</span>
<span class=w>  </span><span class=nx>chain</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>url</span><span class=o>:</span><span class=w> </span><span class=kt>assertNotNull</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;https://dancebox-3001.tanssi-api.network&#39;</span>
<span class=w>    </span><span class=p>),</span>
<span class=w>    </span><span class=nx>rateLimit</span><span class=o>:</span><span class=w> </span><span class=kt>300</span><span class=p>,</span>
<span class=w>  </span><span class=p>},</span>
<span class=p>})</span>
</code></pre></div> <p>The Squid template comes with a variable for your RPC URL defined in your <code>.env</code> file. You can replace that with the RPC URL for your network. For demonstration purposes, the RPC URL for the demo EVM network is hardcoded directly, as shown above. If you're setting the RPC URL in your <code>.env</code>, the respective line will look like this:</p> <div class=highlight><pre><span></span><code>RPC_ENDPOINT=https://dancebox-3001.tanssi-api.network
</code></pre></div> <p>Now, let's define the event that we want to index by adding the following:</p> <div class=highlight><pre><span></span><code><span class=p>.</span><span class=nx>addLog</span><span class=p>({</span>
<span class=w>  </span><span class=nx>address</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=nx>contractAddress</span><span class=p>],</span>
<span class=w>  </span><span class=nx>topic0</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>topic</span><span class=p>],</span>
<span class=w>  </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=p>})</span>
</code></pre></div> <p>The <code>Transfer</code> event is defined in <code>erc20.ts</code>, which was auto-generated when <code>sqd typegen</code> was run. The import <code>import * as erc20 from './abi/erc20'</code> is already included as part of the Squid EVM template.</p> <p>Block range is an important value to modify to narrow the scope of the blocks you're indexing. For example, if you launched your ERC-20 at block <code>650000</code>, there is no need to query the chain before that block for transfer events. Setting an accurate block range will improve the performance of your indexer. You can set the earliest block to begin indexing in the following manner:</p> <div class=highlight><pre><span></span><code><span class=p>.</span><span class=nx>setBlockRange</span><span class=p>({</span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>632400</span><span class=p>,})</span>
</code></pre></div> <p>The chosen start block here corresponds to the relevant block to begin indexing on the demo EVM network, but you should change it to one relevant to your Tanssi-powered network and indexer project.</p> <p>Change the <code>setFields</code> section to specify the following data for our processor to ingest:</p> <div class=highlight><pre><span></span><code><span class=p>.</span><span class=nx>setFields</span><span class=p>({</span>
<span class=w>  </span><span class=nx>log</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>topics</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>    </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>  </span><span class=p>},</span>
<span class=w>  </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>hash</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>  </span><span class=p>},</span>
<span class=p>})</span>
</code></pre></div> <p>We also need to add the following imports to our <code>processor.ts</code> file:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Store</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/typeorm-store&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>erc20</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./abi/erc20&#39;</span><span class=p>;</span>
</code></pre></div> <p>Once you've completed the prior steps, your <code>processor.ts</code> file should look similar to this:</p> <details class=code open=open> <summary>processor.ts</summary> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>assertNotNull</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/util-internal&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>BlockHeader</span><span class=p>,</span>
<span class=w>  </span><span class=nx>DataHandlerContext</span><span class=p>,</span>
<span class=w>  </span><span class=nx>EvmBatchProcessor</span><span class=p>,</span>
<span class=w>  </span><span class=nx>EvmBatchProcessorFields</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Log</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>_Log</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Transaction</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>_Transaction</span><span class=p>,</span>
<span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/evm-processor&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Store</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/typeorm-store&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>erc20</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./abi/erc20&#39;</span><span class=p>;</span>

<span class=c1>// Here you&#39;ll need to import the contract</span>
<span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>contractAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_CONTRACT_ADDRESS&#39;</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>

<span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>processor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>EvmBatchProcessor</span><span class=p>()</span>
<span class=w>  </span><span class=p>.</span><span class=nx>setDataSource</span><span class=p>({</span>
<span class=w>    </span><span class=nx>chain</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>url</span><span class=o>:</span><span class=w> </span><span class=kt>assertNotNull</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;https://dancebox-3001.tanssi-api.network&#39;</span>
<span class=w>      </span><span class=p>),</span>
<span class=w>      </span><span class=nx>rateLimit</span><span class=o>:</span><span class=w> </span><span class=kt>300</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>  </span><span class=p>})</span>
<span class=w>  </span><span class=p>.</span><span class=nx>setFinalityConfirmation</span><span class=p>(</span><span class=mf>10</span><span class=p>)</span>
<span class=w>  </span><span class=p>.</span><span class=nx>setFields</span><span class=p>({</span>
<span class=w>    </span><span class=nx>log</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>topics</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>      </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>hash</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>  </span><span class=p>})</span>
<span class=w>  </span><span class=p>.</span><span class=nx>addLog</span><span class=p>({</span>
<span class=w>    </span><span class=nx>address</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=nx>contractAddress</span><span class=p>],</span>
<span class=w>    </span><span class=nx>topic0</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>topic</span><span class=p>],</span>
<span class=w>    </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
<span class=w>  </span><span class=p>})</span>
<span class=w>  </span><span class=p>.</span><span class=nx>setBlockRange</span><span class=p>({</span>
<span class=w>    </span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>INSERT_START_BLOCK</span><span class=p>,</span><span class=w> </span><span class=c1>// Note the lack of quotes here</span>
<span class=w>  </span><span class=p>});</span>

<span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>Fields</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>EvmBatchProcessorFields</span><span class=o>&lt;</span><span class=ow>typeof</span><span class=w> </span><span class=nx>processor</span><span class=o>&gt;</span><span class=p>;</span>
<span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>Block</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>BlockHeader</span><span class=o>&lt;</span><span class=nx>Fields</span><span class=o>&gt;</span><span class=p>;</span>
<span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>Log</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>_Log</span><span class=o>&lt;</span><span class=nx>Fields</span><span class=o>&gt;</span><span class=p>;</span>
<span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>Transaction</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>_Transaction</span><span class=o>&lt;</span><span class=nx>Fields</span><span class=o>&gt;</span><span class=p>;</span>
</code></pre></div> </details> <h3 id=transform-and-save-the-data>Transform and Save the Data<a class=headerlink href=#transform-and-save-the-data title="Permanent link">&para;</a></h3> <p>While <code>processor.ts</code> determines the data being consumed, <code>main.ts</code> determines the bulk of actions related to processing and transforming that data. In the simplest terms, we are processing the data that was ingested via the SQD processor and inserting the desired pieces into a TypeORM database. For more detailed information on how SQD works, be sure to check out the <a href=https://docs.sqd.dev/sdk/how-to-start/squid-development/ target=_blank>SQD docs on Developing a Squid</a>.</p> <p>Our <code>main.ts</code> file is going to scan through each processed block for the <code>Transfer</code> event and decode the transfer details, including the sender, receiver, and amount. The script also fetches account details for involved addresses and creates transfer objects with the extracted data. The script then inserts these records into a TypeORM database, enabling them to be easily queried. Let's break down the code that comprises <code>main.ts</code> in order:</p> <ol> <li>The job of <code>main.ts</code> is to run the processor and refine the collected data. In <code>processor.run</code>, the processor will iterate through all selected blocks and look for <code>Transfer</code> event logs. Whenever it finds a <code>Transfer</code> event, it's going to store it in an array of transfer events where it awaits further processing</li> <li>The <code>transferEvent</code> interface is the type of structure that stores the data extracted from the event logs</li> <li><code>getTransfer</code> is a helper function that extracts and decodes ERC-20 <code>Transfer</code> event data from a log entry. It constructs and returns a <code>TransferEvent</code> object, which includes details such as the transaction ID, block number, sender and receiver addresses, and the amount transferred. <code>getTransfer</code> is called at the time of storing the relevant transfer events into the array of transfers</li> <li><code>processTransfers</code> enriches the transfer data and then inserts these records into a TypeORM database using the <code>ctx.store</code> methods. The account model, while not strictly necessary, allows us to introduce another entity in the schema to demonstrate working with multiple entities in your Squid</li> <li><code>getAccount</code> is a helper function that manages the retrieval and creation of account objects. Given an account ID and a map of existing accounts, it returns the corresponding account object. If the account doesn't exist in the map, it creates a new one, adds it to the map, and then returns it</li> </ol> <p>We'll demo a sample query in a later section. You can copy and paste the below code into your <code>main.ts</code> file:</p> <details class=code open=open> <summary>main.ts</summary> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>In</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>assertNotNull</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/evm-processor&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>TypeormDatabase</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/typeorm-store&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>erc20</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./abi/erc20&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Account</span><span class=p>,</span><span class=w> </span><span class=nx>Transfer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./model&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>Block</span><span class=p>,</span>
<span class=w>  </span><span class=nx>contractAddress</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Log</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Transaction</span><span class=p>,</span>
<span class=w>  </span><span class=nx>processor</span><span class=p>,</span>
<span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./processor&#39;</span><span class=p>;</span>

<span class=c1>// 1. Iterate through all selected blocks and look for transfer events,</span>
<span class=c1>// storing the relevant events in an array of transfer events</span>
<span class=nx>processor</span><span class=p>.</span><span class=nx>run</span><span class=p>(</span><span class=ow>new</span><span class=w> </span><span class=nx>TypeormDatabase</span><span class=p>({</span><span class=w> </span><span class=nx>supportHotBlocks</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=w> </span><span class=p>}),</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transfers</span><span class=o>:</span><span class=w> </span><span class=kt>TransferEvent</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>

<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>block</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>blocks</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>log</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>block</span><span class=p>.</span><span class=nx>logs</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=nx>log</span><span class=p>.</span><span class=nx>address</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contractAddress</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>        </span><span class=nx>log</span><span class=p>.</span><span class=nx>topics</span><span class=p>[</span><span class=mf>0</span><span class=p>]</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>topic</span>
<span class=w>      </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>transfers</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>getTransfer</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span><span class=w> </span><span class=nx>log</span><span class=p>));</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>processTransfers</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span><span class=w> </span><span class=nx>transfers</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// 2. Define an interface to hold the data from the transfer events</span>
<span class=kd>interface</span><span class=w> </span><span class=nx>TransferEvent</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>block</span><span class=o>:</span><span class=w> </span><span class=kt>Block</span><span class=p>;</span>
<span class=w>  </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=kt>Transaction</span><span class=p>;</span>
<span class=w>  </span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>amount</span><span class=o>:</span><span class=w> </span><span class=kt>bigint</span><span class=p>;</span>
<span class=p>}</span>

<span class=c1>// 3. Extract and decode ERC-20 transfer event data from a log entry</span>
<span class=kd>function</span><span class=w> </span><span class=nx>getTransfer</span><span class=p>(</span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>log</span><span class=o>:</span><span class=w> </span><span class=kt>Log</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>TransferEvent</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>decode</span><span class=p>(</span><span class=nx>log</span><span class=p>);</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=kr>from</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>to</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>value</span><span class=p>;</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transaction</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>assertNotNull</span><span class=p>(</span><span class=nx>log</span><span class=p>.</span><span class=nx>transaction</span><span class=p>,</span><span class=w> </span><span class=sb>`Missing transaction`</span><span class=p>);</span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>log.id</span><span class=p>,</span>
<span class=w>    </span><span class=nx>block</span><span class=o>:</span><span class=w> </span><span class=kt>log.block</span><span class=p>,</span>
<span class=w>    </span><span class=nx>transaction</span><span class=p>,</span>
<span class=w>    </span><span class=kr>from</span><span class=p>,</span>
<span class=w>    </span><span class=nx>to</span><span class=p>,</span>
<span class=w>    </span><span class=nx>amount</span><span class=p>,</span>
<span class=w>  </span><span class=p>};</span>
<span class=p>}</span>

<span class=c1>// 4. Enrich and insert data into typeorm database</span>
<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>processTransfers</span><span class=p>(</span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>transfersData</span><span class=o>:</span><span class=w> </span><span class=kt>TransferEvent</span><span class=p>[])</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>accountIds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Set</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=p>();</span>
<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>transfersData</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>accountIds</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=kr>from</span><span class=p>);</span>
<span class=w>    </span><span class=nx>accountIds</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>to</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>accounts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span>
<span class=w>    </span><span class=p>.</span><span class=nx>findBy</span><span class=p>(</span><span class=nx>Account</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>In</span><span class=p>([...</span><span class=nx>accountIds</span><span class=p>])</span><span class=w> </span><span class=p>})</span>
<span class=w>    </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>q</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>i</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>[</span><span class=nx>i</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>])));</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transfers</span><span class=o>:</span><span class=w> </span><span class=kt>Transfer</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>

<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>transfersData</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>block</span><span class=p>,</span><span class=w> </span><span class=nx>transaction</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>

<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>accounts</span><span class=p>,</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=kr>from</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>accounts</span><span class=p>,</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>to</span><span class=p>);</span>

<span class=w>    </span><span class=nx>transfers</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span>
<span class=w>      </span><span class=ow>new</span><span class=w> </span><span class=nx>Transfer</span><span class=p>({</span>
<span class=w>        </span><span class=nx>id</span><span class=p>,</span>
<span class=w>        </span><span class=nx>blockNumber</span><span class=o>:</span><span class=w> </span><span class=kt>block.height</span><span class=p>,</span>
<span class=w>        </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>new</span><span class=w> </span><span class=nb>Date</span><span class=p>(</span><span class=nx>block</span><span class=p>.</span><span class=nx>timestamp</span><span class=p>),</span>
<span class=w>        </span><span class=nx>txHash</span><span class=o>:</span><span class=w> </span><span class=kt>transaction.hash</span><span class=p>,</span>
<span class=w>        </span><span class=kr>from</span><span class=p>,</span>
<span class=w>        </span><span class=nx>to</span><span class=p>,</span>
<span class=w>        </span><span class=nx>amount</span><span class=p>,</span>
<span class=w>      </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span><span class=p>.</span><span class=nx>upsert</span><span class=p>(</span><span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span><span class=nx>accounts</span><span class=p>.</span><span class=nx>values</span><span class=p>()));</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span><span class=p>.</span><span class=nx>insert</span><span class=p>(</span><span class=nx>transfers</span><span class=p>);</span>
<span class=p>}</span>

<span class=c1>// 5. Helper function to get account object</span>
<span class=kd>function</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>m</span><span class=o>:</span><span class=w> </span><span class=kt>Map</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Account</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Account</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>acc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>acc</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>acc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Account</span><span class=p>();</span>
<span class=w>    </span><span class=nx>acc</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>id</span><span class=p>;</span>
<span class=w>    </span><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>acc</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>acc</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> </details> <p>Now we've taken all of the steps necessary and are ready to run our indexer!</p> <h3 id=run-the-indexer>Run the Indexer<a class=headerlink href=#run-the-indexer title="Permanent link">&para;</a></h3> <p>To run our indexer, we're going to run a series of <code>sqd</code> commands:</p> <p>Build our project:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>build
</code></pre></div> <p>Launch the database:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>up
</code></pre></div> <p>Remove the database migration file that comes with the EVM template and generate a new one for our new database schema:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>migration:generate
</code></pre></div> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>migration:apply
</code></pre></div> <p>Launch the processor:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>process
</code></pre></div> <p>In your terminal, you should see your indexer starting to process blocks!</p> <p><img alt="Get Squid running" src=/images/builders/toolkit/integrations/indexers/sqd/erc20-transfers/sqd-4.webp></p> <h2 id=query-your-squid>Query Your Squid<a class=headerlink href=#query-your-squid title="Permanent link">&para;</a></h2> <p>To query your squid, open up a new terminal window within your project and run the following command:</p> <div class=highlight><pre><span></span><code>sqd<span class=w> </span>serve
</code></pre></div> <p>And that's it! You can now run queries against your Squid on the GraphQL playground at <code>http://localhost:4350/graphql</code>. Try crafting your own GraphQL query, or use the below one:</p> <details class=code open=open> <summary>Example query</summary> <div class=highlight><pre><span></span><code><span class=nx>query</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>accounts</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>id</span>
<span class=w>    </span><span class=nx>transfersFrom</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>id</span>
<span class=w>      </span><span class=nx>blockNumber</span>
<span class=w>      </span><span class=nx>timestamp</span>
<span class=w>      </span><span class=nx>txHash</span>
<span class=w>      </span><span class=nx>to</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>      </span><span class=nx>amount</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=nx>transfersTo</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>id</span>
<span class=w>      </span><span class=nx>blockNumber</span>
<span class=w>      </span><span class=nx>timestamp</span>
<span class=w>      </span><span class=nx>txHash</span>
<span class=w>      </span><span class=kr>from</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>      </span><span class=nx>amount</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </details> <p><img alt="Running queries in GraphQL playground" src=/images/builders/toolkit/integrations/indexers/sqd/erc20-transfers/sqd-5.webp></p> <h2 id=debug-your-squid>Debug Your Squid<a class=headerlink href=#debug-your-squid title="Permanent link">&para;</a></h2> <p>It may seem tricky at first to debug errors when building your Squid, but fortunately, there are several techniques you can use to streamline this process. First and foremost, if you're facing errors with your Squid, you should enable debug mode in your <code>.env</code> file by uncommenting the debug mode line. This will trigger much more verbose logging and will help you locate the source of the error.</p> <div class=highlight><pre><span></span><code># Uncommenting the below line enables debug mode
SQD_DEBUG=*
</code></pre></div> <p>You can also add logging statements directly to your <code>main.ts</code> file to indicate specific parameters like block height and more. For example, see this version of <code>main.ts</code>, which has been enhanced with detailed logging:</p> <details class=code> <summary>main.ts</summary> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>In</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>assertNotNull</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/evm-processor&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>TypeormDatabase</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@subsquid/typeorm-store&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>erc20</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./abi/erc20&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Account</span><span class=p>,</span><span class=w> </span><span class=nx>Transfer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./model&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>Block</span><span class=p>,</span>
<span class=w>  </span><span class=nx>contractAddress</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Log</span><span class=p>,</span>
<span class=w>  </span><span class=nx>Transaction</span><span class=p>,</span>
<span class=w>  </span><span class=nx>processor</span><span class=p>,</span>
<span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./processor&#39;</span><span class=p>;</span>

<span class=nx>processor</span><span class=p>.</span><span class=nx>run</span><span class=p>(</span><span class=ow>new</span><span class=w> </span><span class=nx>TypeormDatabase</span><span class=p>({</span><span class=w> </span><span class=nx>supportHotBlocks</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=w> </span><span class=p>}),</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;Processor started&#39;</span><span class=p>);</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transfers</span><span class=o>:</span><span class=w> </span><span class=kt>TransferEvent</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>

<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=sb>`Processing </span><span class=si>${</span><span class=nx>ctx</span><span class=p>.</span><span class=nx>blocks</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> blocks`</span><span class=p>);</span>
<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>block</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>blocks</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span><span class=sb>`Processing block number </span><span class=si>${</span><span class=nx>block</span><span class=p>.</span><span class=nx>header</span><span class=p>.</span><span class=nx>height</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>log</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>block</span><span class=p>.</span><span class=nx>logs</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span><span class=sb>`Processing log with address </span><span class=si>${</span><span class=nx>log</span><span class=p>.</span><span class=nx>address</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=nx>log</span><span class=p>.</span><span class=nx>address</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contractAddress</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>        </span><span class=nx>log</span><span class=p>.</span><span class=nx>topics</span><span class=p>[</span><span class=mf>0</span><span class=p>]</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>topic</span>
<span class=w>      </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=sb>`Transfer event found in block </span><span class=si>${</span><span class=nx>block</span><span class=p>.</span><span class=nx>header</span><span class=p>.</span><span class=nx>height</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>transfers</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>getTransfer</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span><span class=w> </span><span class=nx>log</span><span class=p>));</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=sb>`Found </span><span class=si>${</span><span class=nx>transfers</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> transfers, processing...`</span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>processTransfers</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span><span class=w> </span><span class=nx>transfers</span><span class=p>);</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;Processor finished&#39;</span><span class=p>);</span>
<span class=p>});</span>

<span class=kd>interface</span><span class=w> </span><span class=nx>TransferEvent</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>block</span><span class=o>:</span><span class=w> </span><span class=kt>Block</span><span class=p>;</span>
<span class=w>  </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=kt>Transaction</span><span class=p>;</span>
<span class=w>  </span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<span class=w>  </span><span class=nx>amount</span><span class=o>:</span><span class=w> </span><span class=kt>bigint</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>getTransfer</span><span class=p>(</span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>log</span><span class=o>:</span><span class=w> </span><span class=kt>Log</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>TransferEvent</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>erc20</span><span class=p>.</span><span class=nx>events</span><span class=p>.</span><span class=nx>Transfer</span><span class=p>.</span><span class=nx>decode</span><span class=p>(</span><span class=nx>log</span><span class=p>);</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=kr>from</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>to</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>.</span><span class=nx>value</span><span class=p>;</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transaction</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>assertNotNull</span><span class=p>(</span><span class=nx>log</span><span class=p>.</span><span class=nx>transaction</span><span class=p>,</span><span class=w> </span><span class=sb>`Missing transaction`</span><span class=p>);</span>

<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span>
<span class=w>    </span><span class=sb>`Decoded transfer event: from </span><span class=si>${</span><span class=kr>from</span><span class=si>}</span><span class=sb> to </span><span class=si>${</span><span class=nx>to</span><span class=si>}</span><span class=sb> amount </span><span class=si>${</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>log.id</span><span class=p>,</span>
<span class=w>    </span><span class=nx>block</span><span class=o>:</span><span class=w> </span><span class=kt>log.block</span><span class=p>,</span>
<span class=w>    </span><span class=nx>transaction</span><span class=p>,</span>
<span class=w>    </span><span class=kr>from</span><span class=p>,</span>
<span class=w>    </span><span class=nx>to</span><span class=p>,</span>
<span class=w>    </span><span class=nx>amount</span><span class=p>,</span>
<span class=w>  </span><span class=p>};</span>
<span class=p>}</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>processTransfers</span><span class=p>(</span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>transfersData</span><span class=o>:</span><span class=w> </span><span class=kt>TransferEvent</span><span class=p>[])</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;Starting to process transfer data&#39;</span><span class=p>);</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>accountIds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Set</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=p>();</span>
<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>transfersData</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>accountIds</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=kr>from</span><span class=p>);</span>
<span class=w>    </span><span class=nx>accountIds</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>to</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span><span class=sb>`Fetching accounts for </span><span class=si>${</span><span class=nx>accountIds</span><span class=p>.</span><span class=nx>size</span><span class=si>}</span><span class=sb> addresses`</span><span class=p>);</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>accounts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span>
<span class=w>    </span><span class=p>.</span><span class=nx>findBy</span><span class=p>(</span><span class=nx>Account</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>In</span><span class=p>([...</span><span class=nx>accountIds</span><span class=p>])</span><span class=w> </span><span class=p>})</span>
<span class=w>    </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>q</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>i</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>[</span><span class=nx>i</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>])));</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span>
<span class=w>    </span><span class=sb>`Accounts fetched, processing </span><span class=si>${</span><span class=nx>transfersData</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> transfers`</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>transfers</span><span class=o>:</span><span class=w> </span><span class=kt>Transfer</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>

<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>transfersData</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>block</span><span class=p>,</span><span class=w> </span><span class=nx>transaction</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>

<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>accounts</span><span class=p>,</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=kr>from</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>accounts</span><span class=p>,</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>to</span><span class=p>);</span>

<span class=w>    </span><span class=nx>transfers</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span>
<span class=w>      </span><span class=ow>new</span><span class=w> </span><span class=nx>Transfer</span><span class=p>({</span>
<span class=w>        </span><span class=nx>id</span><span class=p>,</span>
<span class=w>        </span><span class=nx>blockNumber</span><span class=o>:</span><span class=w> </span><span class=kt>block.height</span><span class=p>,</span>
<span class=w>        </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>new</span><span class=w> </span><span class=nb>Date</span><span class=p>(</span><span class=nx>block</span><span class=p>.</span><span class=nx>timestamp</span><span class=p>),</span>
<span class=w>        </span><span class=nx>txHash</span><span class=o>:</span><span class=w> </span><span class=kt>transaction.hash</span><span class=p>,</span>
<span class=w>        </span><span class=kr>from</span><span class=p>,</span>
<span class=w>        </span><span class=nx>to</span><span class=p>,</span>
<span class=w>        </span><span class=nx>amount</span><span class=p>,</span>
<span class=w>      </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span><span class=sb>`Upserting </span><span class=si>${</span><span class=nx>accounts</span><span class=p>.</span><span class=nx>size</span><span class=si>}</span><span class=sb> accounts`</span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span><span class=p>.</span><span class=nx>upsert</span><span class=p>(</span><span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span><span class=nx>accounts</span><span class=p>.</span><span class=nx>values</span><span class=p>()));</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>debug</span><span class=p>(</span><span class=sb>`Inserting </span><span class=si>${</span><span class=nx>transfers</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> transfers`</span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>store</span><span class=p>.</span><span class=nx>insert</span><span class=p>(</span><span class=nx>transfers</span><span class=p>);</span>
<span class=w>  </span><span class=nx>ctx</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;Transfer data processing completed&#39;</span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>getAccount</span><span class=p>(</span><span class=nx>m</span><span class=o>:</span><span class=w> </span><span class=kt>Map</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Account</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Account</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>acc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>acc</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>acc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Account</span><span class=p>();</span>
<span class=w>    </span><span class=nx>acc</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>id</span><span class=p>;</span>
<span class=w>    </span><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>acc</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>acc</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> </details> <p>See the <a href=https://docs.sqd.dev/sdk/reference/logger/ target=_blank>SQD guide to logging</a> for more information on debug mode.</p> <h3 id=common-errors>Common Errors<a class=headerlink href=#common-errors title="Permanent link">&para;</a></h3> <p>Below are some common errors you may face when building a project and how you can solve them.</p> <div class=highlight><pre><span></span><code>Error response from daemon: driver failed programming external connectivity on endpoint my-awesome-squid-db-1
(49df671a7b0531abbb5dc5d2a4a3f5dc7e7505af89bf0ad1e5480bd1cdc61052):
Bind for 0.0.0.0:23798 failed: port is already allocated
</code></pre></div> <p>This error indicates that you have another instance of SQD running somewhere else. You can stop that gracefully with the command <code>sqd down</code> or by pressing the <strong>Stop</strong> button next to the container in Docker Desktop.</p> <div class=highlight><pre><span></span><code>Error: connect ECONNREFUSED 127.0.0.1:23798
     at createConnectionError (node:net:1634:14)
     at afterConnectMultiple (node:net:1664:40) {
     errno: -61,code: &#39;ECONNREFUSED&#39;,syscall: &#39;connect&#39;,
     address: &#39;127.0.0.1&#39;,port: 23798}
</code></pre></div> <p>To resolve this, run <code>sqd up</code> before you run <code>sqd migration:generate</code></p> <p>Is your Squid error-free, yet you aren't seeing any transfers detected? Make sure your log events are consistent and identical to the ones your processor is looking for. Your contract address also needs to be lowercase, which you can be assured of by defining it as follows:</p> <div class=highlight><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>contractAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0x37822de108AFFdd5cDCFDaAa2E32756Da284DB85&#39;</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span>
</code></pre></div> <div class=page-disclaimer> The information presented herein has been provided by third parties and is made available solely for general information purposes. Tanssi does not endorse any project listed and described on the Tanssi Doc Website (https://docs.tanssi.network/). Tanssi Foundation does not warrant the accuracy, completeness or usefulness of this information. Any reliance you place on such information is strictly at your own risk. Tanssi Foundation disclaims all liability and responsibility arising from any reliance placed on this information by you or by anyone who may be informed of any of its contents. All statements and/or opinions expressed in these materials are solely the responsibility of the person or entity providing those materials and do not necessarily represent the opinion of Tanssi Foundation. The information should not be construed as professional or financial advice of any kind. Advice from a suitably qualified professional should always be sought in relation to any particular matter or circumstance. The information herein may link to or integrate with other websites operated or content provided by third parties, and such other websites may link to this website. Tanssi Foundation has no control over any such other websites or their content and will have no liability arising out of or related to such websites or their content. The existence of any such link does not constitute an endorsement of such websites, the content of the websites, or the operators of the websites. These links are being provided to you only as a convenience and you release and hold Tanssi Foundation harmless from any and all liability arising from your use of this information or the information provided by any third-party website or service. </div> <div class=md-source-file> <small> <span class=source-file-label>Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 19, 2025</span> <br> <span class=source-file-seperator>|</span> <span class=source-file-label>Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 10, 2023</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=columns-llms-button> <button class="md-button primary copy-llms-btn" , title="Copy to clipboard"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"/></svg> llms-full.txt </button> </div> <div class=md-social> <a href=https://x.com/TanssiNetwork target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://t.me/tanssiofficial target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://discord.gg/tanssi target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://www.linkedin.com/company/tanssi target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/moondance-labs/tanssi target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.youtube.com/@TanssiNetwork target=_blank rel=noopener title=YouTube class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> <div class=md-copyright> <div class=md-copyright__highlight>  2025 Moondance Labs. All Rights Reserved. </div> <div class=network-links> <a href=https://www.tanssi.network/privacy-policy target=_blank>Privacy Policy</a> <a href=https://www.tanssi.network/terms-of-use target=_blank>Terms of Use</a> </div> </div> <div class=papermoon> <span>Made with  by <a href=https://papermoon.io/ target=_blank>PaperMoon</a></span> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "content.code.copy", "content.action.edit"], "search": "../../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../../../../../js/externalLinkModal.min.js></script> <script src=../../../../../../js/fixCreatedDate.min.js></script> <script src=../../../../../../js/clipboardCopy.js></script> </body> </html>